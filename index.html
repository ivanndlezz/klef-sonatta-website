<!doctype html>
<html lang="es">
  <!-- Klef Home -->

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Klef Agency - Agencia Consultora de Marketing en Los Cabos</title>
    <!-- Favicons -->
    <link
      rel="icon"
      href="./assets/images/favicons/favicon-32x32.png"
      sizes="32x32"
    />
    <link
      rel="icon"
      href="./assets/images/favicons/favicon-192x192.png"
      sizes="192x192"
    />
    <link
      rel="apple-touch-icon"
      href="./assets/images/favicons/favicon-180x180.png"
    />
    <meta
      name="msapplication-TileImage"
      content="./assets/images/favicons/favicon-270x270.png"
    />
    <meta
      name="description"
      content="Klef Agency: Laboratorio de negocios que transforma marcas con estrategia, identidad y tecnología."
    />

    <!-- Fonts -->
    <style data-css>
      html {
        scroll-behavior: smooth;
      }

      body {
        font-family: "Inter", sans-serif;
        margin: 0;
        -webkit-font-smoothing: antialiased;
      }

      /* SCROLL LOCK UTILITY - iOS Compatible */
      body.scroll-locked {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        overscroll-behavior: none;
        /* Prevent iOS rubber-banding */
        -webkit-overflow-scrolling: auto;
      }

      /* Hide dynamic island when scroll is locked */
      body.scroll-locked ~ .dynamic-island-container,
      body.scroll-locked + .dynamic-island-container,
      .scroll-locked ~ .dynamic-island-container,
      .scroll-locked + .dynamic-island-container {
        display: none !important;
      }

      /* MEGA-MENU CSS */
      :root {
        --k-blue: #0066cc;
        --k-purple: #6e6eff;
        --fill: -webkit-fill-available;

        --k-max: 1000px;
        --k-gap: 40px;
        --k-step-w: 21rem;
        --k-num-size: 4rem;
        --k-radius: 0.375rem;
        --k-gray: #6b7280;
        --k-light-gray: #8e97a8;
        --k-light: #e5e7eb;
        --k-dark: #111;

        --k-section-title-size: 2.5rem;
        --k-section-title-weight: 700;
        --k-section-subtitle: 1.125rem;

        --brands: rgba(245, 124, 0, 0.9);
        --strategy: rgba(25, 118, 210, 0.9);
        --studio: rgba(194, 24, 91, 0.9);
        --dev: rgba(56, 142, 60, 0.9);

        --brands-hover: #f9e4b4;
        --strategy-hover: #d5e6f6;
        --studio-hover: #f6d5e6;
        --dev-hover: #d4e8cc;

        /* === Z-INDEX SYSTEM === */
        --z-1: 1;
        --z-10: 10;
        --z-base: 995;
        --z-elevated: 998;
        --z-hover: 999;
        --z-dropdown: 1000;
        --z-menu: 1001;
        --z-mobile: 1002;
        --z-mobile-active: 1005;
        --z-menu-active: 1006;
        --z-backdrop: 9998;
        --z-modal: 9999;
        --z-overlay: 10000;
        --z-floating: 2000;
      }

      .mobile-topbar {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background: white;
        padding: 12px 24px;
        align-items: center;
        justify-content: space-between;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        z-index: var(--z-mobile);
      }

      .mobile-topbar.re-index-z-active {
        z-index: var(--z-1) !important;
      }

      .mega-topbar {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background: white;
        padding: 12px 24px;
        align-items: center;
        justify-content: space-between;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        z-index: var(--z-mobile);
        transform: translateY(-100%);
        transition: transform 0.3s ease;
      }

      .mega-topbar.active {
        display: flex;
        transform: translateY(0);
        z-index: var(--z-menu-active);
      }

      .back-btn,
      .close-btn {
        background: #f0f0f0;
        border: none;
        color: #1d1d1f;
        cursor: pointer;
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 14px;
        font-weight: 500;
        transition: background 0.2s;
      }

      .close-btn.toggle-menu {
        position: relative;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 8px 16px;
      }

      /* === TOP CONTROLS DROPDOWN MENU === */
      .top-controls-dropdown {
        position: absolute;
        top: 100%;
        left: 0;
        margin-top: 8px;
        min-width: 200px;
        background: white;
        border-radius: 12px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
        opacity: 0;
        visibility: hidden;
        transform: translateY(-10px);
        transition: all 0.2s ease;
        z-index: var(--z-dropdown);
        overflow: hidden;
      }

      .top-controls-dropdown.active {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
      }

      .top-controls-dropdown ul {
        list-style: none;
        margin: 0;
        padding: 8px 0;
      }

      .top-controls-dropdown li {
        padding: 0;
      }

      .top-controls-dropdown a,
      .top-controls-dropdown button {
        display: flex;
        align-items: center;
        gap: 12px;
        width: 100%;
        padding: 12px 16px;
        background: transparent;
        border: none;
        text-align: left;
        text-decoration: none;
        color: var(--text-primary, #1d1d1f);
        font-size: 14px;
        cursor: pointer;
        transition: background 0.2s ease;
      }

      .top-controls-dropdown a:hover,
      .top-controls-dropdown button:hover {
        background: var(--bg-secondary, #f5f5f7);
      }

      .top-controls-dropdown a svg,
      .top-controls-dropdown button svg {
        width: 18px;
        height: 18px;
        stroke: var(--text-secondary, #6e6e73);
      }

      .top-controls-wrapper {
        position: relative;
      }

      .back-btn:hover,
      .close-btn:hover {
        background: #e5e5e5;
      }

      .back-btn {
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
      }

      .back-btn.visible {
        opacity: 1;
        pointer-events: all;
      }

      .navbar {
        display: flex;
        gap: 24px;
        padding: 12px 32px;
        background: white;
        box-shadow: 0 0 60px 8px #00000024;
        position: sticky;
        top: 0;
        z-index: var(--z-base);
        justify-content: space-between;
        align-items: center;
        pointer-events: none;
      }

      .navbar:hover {
        z-index: var(--z-hover);
      }

      .navbar * {
        pointer-events: all;
      }

      .navbar .logo {
        font-size: 20px;
        font-weight: 500;
        color: #1d1d1f;
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .navbar .logo::before {
        content: "";
        width: 32px;
        height: 32px;
        background: linear-gradient(135deg, var(--k-blue), var(--k-purple));
        border-radius: 8px;
      }

      [data-mega]:before {
        content: "";
        display: flex;
        width: 135px;
        height: 20px;
        position: absolute;
        background: var(--k-black);
        transform: translateY(25px);
      }

      .menu-links {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .section-label {
        display: none;
      }

      .menu-links > a {
        padding: 8px 16px;
        color: #1d1d1f;
        text-decoration: none;
        font-size: 15px;
        border-radius: 8px;
        transition: all 0.2s ease;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .menu-links > a:hover {
        background: rgba(0, 0, 0, 0.05);
      }

      .menu-links .icon {
        display: none;
      }

      .right-menu {
        display: flex;
        gap: 8px;
        align-items: center;
      }

      .btn-icon {
        width: 40px;
        height: 40px;
        border: none;
        background: transparent;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
        transition: background 0.2s ease;
        color: var(--text-primary, #1d1d1f);
      }

      .btn-icon:hover {
        background: rgba(0, 0, 0, 0.05);
      }

      .btn-icon svg {
        width: 20px;
        height: 20px;
        stroke: #1d1d1f;
      }

      nav#main-nav::before,
      nav#main-nav::after {
        content: "";
        display: block;
        --wh: 50px;
        width: var(--wh);
        height: var(--wh);
        position: absolute;
        background-color: transparent;
        top: 0;
        transform: translate(0px, 63px);
        filter: opacity(1);
      }

      nav#main-nav::before {
        left: 0;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' id='Capa_2' data-name='Capa 2' viewBox='0 0 64.51 64.51'%3E%3Cdefs%3E%3Cstyle%3E .cls-1 %7B fill: %23ffffff; stroke-width: 0px; %7D %3C/style%3E%3C/defs%3E%3Cg id='Capa_1-2' data-name='Capa 1'%3E%3Cpath class='cls-1' d='m1.76,64.51H0V0h64.51v1.76c-34.66,0-62.75,28.09-62.75,62.75Z'/%3E%3C/g%3E%3C/svg%3E");
      }

      nav#main-nav::after {
        right: 0;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' id='Capa_2' data-name='Capa 2' viewBox='0 0 64.51 64.51'%3E%3Cdefs%3E%3Cstyle%3E .cls-1 %7B fill: %23ffffff; stroke-width: 0px; %7D %3C/style%3E%3C/defs%3E%3Cg id='Capa_1-2' data-name='Capa 1'%3E%3Cpath class='cls-1' d='m62.75,64.51h1.76s0-64.51,0-64.51H0s0,1.76,0,1.76c34.66,0,62.75,28.09,62.75,62.75Z'/%3E%3C/g%3E%3C/svg%3E");
      }

      .mega-menus-container {
        position: fixed;
        top: 64px;
        left: 0;
        right: 0;
        z-index: var(--z-elevated);
        pointer-events: none;
      }

      .mega-menu {
        display: none;
        background: white;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15);
        border-radius: 0 0 20px 20px;
        max-width: 1200px;
        margin: 0 auto;
        padding: 40px;
        pointer-events: all;
      }

      .mega-menu.active {
        display: block;
      }

      .mega-content {
        display: grid;
        grid-template-columns: 1fr 2fr;
        gap: 40px;
      }

      .mega-sidebar {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .mega-sidebar-title {
        font-size: 12px;
        text-transform: uppercase;
        color: #86868b;
        margin-bottom: 12px;
        letter-spacing: 0.08em;
        font-weight: 600;
      }

      .mega-sidebar a {
        padding: 12px 16px;
        color: #1d1d1f;
        text-decoration: none;
        border-radius: 8px;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .mega-sidebar a:hover {
        background: #f5f5f7;
      }

      .mega-sidebar a svg {
        width: 16px;
        height: 16px;
        stroke: #86868b;
      }

      .mega-main {
        background: #f9f9f9;
        border-radius: 16px;
        padding: 32px;
      }

      .mega-featured {
        display: flex;
        gap: 24px;
        align-items: center;
      }

      .featured-image {
        width: 180px;
        height: 180px;
        border-radius: 16px;
        background: linear-gradient(135deg, #ffe8c0, #ffb6a3);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 80px;
        flex-shrink: 0;
      }

      .featured-content h3 {
        font-size: 24px;
        font-weight: 600;
        color: #1d1d1f;
        margin-bottom: 8px;
      }

      .featured-content p {
        font-size: 15px;
        color: #6e6e73;
        line-height: 1.5;
        margin-bottom: 16px;
      }

      .featured-tag {
        display: inline-block;
        padding: 4px 12px;
        background: rgba(0, 0, 0, 0.05);
        border-radius: 12px;
        font-size: 12px;
        color: #6e6e73;
        margin-bottom: 12px;
      }

      .btn-primary {
        display: inline-block;
        padding: 10px 20px;
        background: #1d1d1f;
        color: white;
        text-decoration: none;
        border-radius: 20px;
        font-size: 14px;
        font-weight: 500;
        transition: all 0.2s ease;
      }

      .btn-primary:hover {
        background: #000;
      }

      /* ============================================
           SEARCH OVERLAY
        ============================================ */
      .search-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100vh;
        background: rgba(0, 0, 0, 0);
        backdrop-filter: blur(0px);
        z-index: var(--z-overlay);
        opacity: 0;
        pointer-events: none;
        transition: all 0.4s cubic-bezier(0.28, 0.11, 0.32, 1);
      }

      .search-overlay.active {
        opacity: 1;
        pointer-events: all;
        background: rgba(0, 0, 0, 0.48);
        backdrop-filter: blur(20px);
      }

      .search-panel {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        background: #ffffff;
        transform: translateY(-100%);
        transition: transform 0.5s cubic-bezier(0.28, 0.11, 0.32, 1);
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      }

      .search-overlay.active .search-panel {
        transform: translateY(0);
      }

      .search-content {
        max-width: 980px;
        margin: 0 auto;
        padding: 60px 40px 80px;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        max-height: calc(100vh - 100px);
      }

      .search-input-wrapper {
        display: flex;
        align-items: center;
        gap: 16px;
        padding-bottom: 24px;
        border-bottom: 1px solid #d2d2d7;
        margin-bottom: 40px;
      }

      .search-icon {
        width: 32px;
        height: 32px;
      }

      .search-icon svg {
        width: 100%;
        height: 100%;
        stroke: #86868b;
      }

      .search-input {
        flex: 1;
        border: none;
        outline: none;
        font-size: 28px;
        color: #1d1d1f;
        background: transparent;
        font-family: inherit;
      }

      .search-input::placeholder {
        color: #6e6e73;
      }

      .clear-input {
        width: 24px;
        height: 24px;
        border: none;
        background: transparent;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: opacity 0.2s ease;
        flex-shrink: 0;
        color: #86868b;
      }

      .clear-input.visible {
        opacity: 1;
      }

      .clear-input:hover {
        opacity: 0.7;
      }

      .clear-input svg {
        width: 20px;
        height: 20px;
      }

      .close-search {
        position: absolute;
        top: 20px;
        right: 20px;
        width: 36px;
        height: 36px;
        border: none;
        background: rgba(0, 0, 0, 0.06);
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        opacity: 0;
        z-index: var(--z-hover);
        --blur: 10px;
        backdrop-filter: blur(var(--blur));
        -webkit-backdrop-filter: blur(var(--blur));
        border: solid 1px #bdbdbd;
        border-style: ridge;
      }

      .search-overlay.active .close-search {
        opacity: 1;
        transition-delay: 0.3s;
      }

      .close-search:hover {
        background: rgba(0, 0, 0, 0.12);
      }

      .close-search svg {
        width: 16px;
        height: 16px;
        stroke: #1d1d1f;
      }

      .quick-links {
        opacity: 0;
        transform: translateY(10px);
        transition: all 0.4s cubic-bezier(0.28, 0.11, 0.32, 1);
      }

      .search-overlay.active .quick-links {
        opacity: 1;
        transform: translateY(0);
        transition-delay: 0.2s;
      }

      .quick-links-title {
        font-size: 12px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: #86868b;
        margin-bottom: 20px;
      }

      .links-list {
        list-style: none;
      }

      .links-list li {
        border-bottom: 1px solid #d2d2d7;
      }

      .links-list li:last-child {
        border-bottom: none;
      }

      .links-list a {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 18px 0;
        text-decoration: none;
        color: #1d1d1f;
        font-size: 17px;
        transition: opacity 0.2s ease;
      }

      .links-list a:hover {
        opacity: 0.6;
      }

      .link-arrow {
        width: 16px;
        height: 16px;
      }

      .link-arrow svg {
        width: 100%;
        height: 100%;
        stroke: #86868b;
      }

      /* QUICK SUGGESTIONS */
      .quick-suggestions {
        opacity: 0;
        transform: translateY(10px);
        transition: all 0.4s cubic-bezier(0.28, 0.11, 0.32, 1);
      }

      .search-overlay.active .quick-suggestions {
        opacity: 1;
        transform: translateY(0);
        transition-delay: 0.2s;
      }

      .suggestions-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 24px;
        margin-top: 16px;
      }

      .suggestion-section {
        content: "";
      }

      .suggestion-title {
        font-size: 12px;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: #86868b;
        margin-bottom: 12px;
      }

      .suggestion-list {
        list-style: none;
      }

      .suggestion-list li {
        margin-bottom: 8px;
        border-bottom: 1px solid #d2d2d7;
      }

      .suggestion-list a {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 18px 0;
        text-decoration: none;
        color: #1d1d1f;
        font-size: 17px;
        transition: all 0.2s ease;
        flex-direction: row-reverse;
        justify-content: space-between;
        width: -webkit-fill-available;
      }

      .suggestion-list a:hover {
        color: #0066cc;
        background-image: linear-gradient(90deg, transparent, #e5e5e5);
      }

      .suggestion-list svg {
        --wh: 24px;
        width: var(--wh);
        height: var(--wh);
        opacity: 0.5;
        padding-right: 10px;
      }

      /* SEARCH RESULTS */
      .search-results {
        margin-top: 40px;
        animation: fadeIn 0.3s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }

        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .results-header {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 24px;
        padding-bottom: 12px;
      }

      .results-header h4 {
        font-size: 48px;
        font-weight: 700;
        margin-bottom: 10px;
        text-align: center;
      }

      .results-count {
        font-size: 14px;
        color: #86868b;
      }

      .results-count strong {
        color: #1d1d1f;
        font-weight: 600;
      }

      .result-group {
        margin-bottom: 0;
      }

      .result-group-header {
        display: none;
      }

      .result-items {
        list-style: none;
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 24px;
      }

      .result-item {
        background: white;
        border-radius: 16px;
        overflow: hidden;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border: 1px solid #e5e5e5;
        display: flex;
        flex-direction: column;
        cursor: pointer;
        height: fit-content;
      }

      .result-item:hover {
        border-color: #0066cc;
        box-shadow: 0 12px 40px rgba(0, 102, 204, 0.12);
        transform: translateY(-8px);
      }

      .result-item a {
        text-decoration: none;
        color: inherit;
        display: flex;
        flex-direction: column;
        height: 100%;
      }

      .result-image {
        width: 100%;
        position: relative;
        overflow: hidden;
      }

      .result-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
      }

      .result-image-placeholder {
        display: none;
      }

      .result-image-placeholder svg {
        width: 80px;
        height: 80px;
        opacity: 0.15;
      }

      .result-type-icon {
        position: absolute;
        top: 16px;
        left: 16px;
        width: 40px;
        height: 40px;
        background: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(10px);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
      }

      .result-type-icon svg {
        width: 20px;
        height: 20px;
        stroke-width: 2;
      }

      .result-type-icon.blog svg {
        stroke: #ff6b6b;
      }

      .result-type-icon.page svg {
        stroke: #0066cc;
      }

      .result-type-icon.portfolio svg {
        stroke: #e68600;
      }

      .result-content {
        padding: 24px;
        flex: 1;
        display: flex;
        flex-direction: column;
      }

      .result-type-label {
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        font-weight: 600;
        margin-bottom: 10px;
      }

      .result-type-label.blog {
        color: #ff6b6b;
      }

      .result-type-label.page {
        color: #0066cc;
      }

      .result-type-label.portfolio {
        color: #e68600;
      }

      .result-title {
        font-size: 19px;
        font-weight: 600;
        color: #1d1d1f;
        margin-bottom: 12px;
        line-height: 1.3;
      }

      .result-excerpt {
        font-size: 14px;
        color: #86868b;
        line-height: 1.6;
        margin-bottom: 0;
        flex: 1;
        display: none;
      }

      .result-meta {
        display: none;
      }

      .no-results {
        text-align: center;
        padding: 60px 20px;
      }

      .no-results-icon {
        width: 80px;
        height: 80px;
        margin: 0 auto 24px;
        opacity: 0.3;
      }

      .no-results-title {
        font-size: 24px;
        font-weight: 600;
        color: #1d1d1f;
        margin-bottom: 12px;
      }

      .no-results-text {
        font-size: 15px;
        color: #86868b;
      }

      .result-image:has(.result-image-placeholder) {
        height: 70px !important;
      }

      /* ADAPTIVE SHEET */
      #backdrop {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s ease;
        z-index: var(--z-backdrop);
      }

      #backdrop.visible {
        opacity: 1;
        pointer-events: auto;
      }

      /* ============================================
       PORTFOLIO SHEET LAYOUT - NEW STRUCTURE
       ============================================ */

      #bottomsheet {
        position: fixed;
        background: white;
        z-index: var(--z-modal);
        display: flex;
        flex-direction: column;
        transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
        overflow: hidden;
      }

      /* === TOP CONTROLS (Header) === */
      .sheet-top-controls {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 16px;
        border-bottom: 1px solid var(--k-light);
        flex-shrink: 0;
        gap: 12px;
      }

      .top-controls-left {
        display: flex;
        align-items: center;
        gap: 8px;
        flex: 1;
      }

      .top-btn {
        padding: 8px 16px;
        background: var(--bg-secondary, #f5f5f7);
        border: none;
        border-radius: 20px;
        font-size: 14px;
        font-weight: 500;
        color: var(--text-primary, #1d1d1f);
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .top-btn:hover {
        background: var(--bg-tertiary, #e5e5e5);
      }

      .top-chevron {
        width: 36px;
        height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: transparent;
        border: none;
        cursor: pointer;
        border-radius: 50%;
        transition: background 0.2s ease;
        color: var(--text-secondary, #6e6e73);
      }

      .top-chevron:hover {
        background: rgba(0, 0, 0, 0.05);
      }

      .top-chevron svg {
        width: 20px;
        height: 20px;
        transition: transform 0.2s ease;
      }

      .top-chevron.expanded svg {
        transform: rotate(180deg);
      }

      /* === DRAG HANDLE (Mobile) === */
      .drag-handle {
        width: 40px;
        height: 4px;
        background: var(--gray-300, #d0d0d0);
        border-radius: 2px;
        margin: 0 auto 8px;
      }

      /* === CLOSE BUTTON === */
      #bottomsheet .close-btn {
        width: 32px;
        height: 32px;
        border: none;
        background: transparent;
        border-radius: 4px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background 0.2s ease;
        flex-shrink: 0;
        padding: 0px;
      }

      #bottomsheet .close-btn:hover {
        background: var(--bg-tertiary, #f0f0f0);
      }

      #bottomsheet .close-btn svg {
        width: 20px;
        height: 20px;
        stroke: var(--text-secondary, #666);
      }

      /* === CONTENT AREA (Middle) === */
      #sheet-content {
        flex: 1;
        overflow-y: auto;
        padding: 20px;
        -webkit-overflow-scrolling: touch;
      }

      /* === BOTTOM CONTROLS (Footer) === */
      .sheet-bottom-controls {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 16px 20px;
        border-top: 1px solid var(--k-light);
        background: white;
        flex-shrink: 0;
      }

      .btn-secondary {
        padding: 12px 20px;
        background: transparent;
        border: 1px solid var(--gray-300, #cfd4d8);
        border-radius: 20px;
        font-size: 14px;
        font-weight: 500;
        color: var(--text-primary, #1d1d1f);
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .btn-secondary:hover {
        background: var(--bg-secondary, #f5f5f7);
        border-color: var(--gray-400, #b0b5ba);
      }

      .btn-primary {
        flex: 1;
        padding: 14px 24px;
        background: var(--blue, #0071e3);
        color: white;
        border: none;
        border-radius: 20px;
        font-size: 15px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        text-align: center;
      }

      .btn-primary:hover {
        background: var(--blue-hover, #0077ed);
      }

      .btn-more {
        width: 40px;
        height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: transparent;
        border: none;
        cursor: pointer;
        border-radius: 50%;
        font-size: 18px;
        color: var(--text-secondary, #6e6e73);
        transition: all 0.2s ease;
      }

      .btn-more:hover {
        background: rgba(0, 0, 0, 0.05);
      }

      /* === PORTFOLIO DETAIL COMPONENT === */
      .portfolio-detail {
        padding: 0;
      }

      .portfolio-detail-cover {
        width: 100%;
        height: 200px;
        object-fit: cover;
        border-radius: 16px;
        margin-bottom: 20px;
      }

      .portfolio-detail-header {
        display: flex;
        align-items: center;
        gap: 16px;
        margin-bottom: 16px;
      }

      .portfolio-detail-logo {
        width: 60px;
        height: 60px;
        border-radius: 12px;
        object-fit: contain;
        background: #f5f5f5;
        padding: 8px;
      }

      .portfolio-detail-title {
        flex: 1;
      }

      .portfolio-detail-title h2 {
        font-size: 24px;
        font-weight: 600;
        margin: 0 0 4px;
        color: #1d1d1f;
      }

      .portfolio-detail-title h2 small {
        font-weight: 400;
        color: #86868b;
      }

      .portfolio-detail-client {
        font-size: 14px;
        color: #6e6e73;
      }

      .portfolio-detail-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-bottom: 16px;
      }

      .portfolio-detail-meta .tag {
        padding: 4px 12px;
        background: #f5f5f7;
        border-radius: 12px;
        font-size: 12px;
        color: #6e6e73;
      }

      .portfolio-detail-meta .tag-discipline {
        background: rgba(0, 102, 204, 0.1);
        color: #0066cc;
      }

      .portfolio-detail-description {
        font-size: 15px;
        line-height: 1.6;
        color: #1d1d1f;
        margin-bottom: 20px;
      }

      /* === MOBILE (Bottom Sheet) === */
      @media (max-width: 767px) {
        .clear-input {
          transform: translateX(8px);
        }

        .search-input-wrapper {
          margin-top: 20px;
        }

        #bottomsheet {
          bottom: 0;
          left: 0;
          right: 0;
          height: 70vh;
          max-height: 90vh;
          transform: translateY(100%);
          border-radius: 20px 20px 0 0;
          box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.15);
        }

        #bottomsheet.open {
          transform: translateY(0);
        }

        #bottomsheet.full {
          height: 95vh;
        }

        .drag-handle {
          display: block;
        }

        .sheet-top-controls {
          padding: 0px 16px;
        }

        .top-btn {
          padding: 6px 12px;
          font-size: 13px;
        }

        #sheet-content {
          padding: 16px;
        }

        .sheet-bottom-controls {
          padding: 12px 16px;
          flex-wrap: wrap;
        }

        .btn-secondary {
          padding: 10px 16px;
          font-size: 13px;
        }

        .btn-primary {
          flex: 1;
          min-width: 120px;
          padding: 12px 20px;
          font-size: 14px;
        }

        .btn-more {
          width: 36px;
          height: 36px;
          font-size: 16px;
        }

        .portfolio-detail-cover {
          height: 180px;
        }

        .portfolio-detail-title h2 {
          font-size: 20px;
        }
      }

      /* === DESKTOP (Side Panel) === */
      @media (min-width: 768px) {
        #bottomsheet {
          top: 0;
          right: 0;
          bottom: 0;
          width: 480px;
          max-width: 90vw;
          height: 100vh;
          transform: translateX(100%);
          border-left: 1px solid var(--k-light);
          box-shadow: -4px 0 20px rgba(0, 0, 0, 0.15);
        }

        #bottomsheet.open {
          transform: translateX(0);
        }

        #bottomsheet.full {
          width: 680px;
        }

        .drag-handle {
          display: none;
        }

        .close-btn {
          display: flex;
        }

        .sheet-top-controls {
          padding: 0px 20px;
        }

        #sheet-content {
          padding: 24px;
        }

        .sheet-bottom-controls {
          padding: 16px 20px;
        }

        .portfolio-detail-cover {
          height: 220px;
        }
      }

      /* LOADING */
      .loading {
        text-align: center;
        padding: 40px;
        color: #86868b;
      }

      .loading-spinner {
        width: 40px;
        height: 40px;
        margin: 0 auto 16px;
        border: 3px solid #f5f5f7;
        border-top-color: #0066cc;
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      /* SKELETON LOADING FOR SEARCH RESULTS */
      .skel-card {
        background: white;
        border-radius: 16px;
        overflow: hidden;
        border: 1px solid #e5e5e5;
        display: flex;
        flex-direction: column;
        height: fit-content;
      }

      .skel-image {
        width: 100%;
        height: 200px;
        background: #f0f0f0;
        position: relative;
        overflow: hidden;
      }

      .skel-image::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, #f0f0f0, #e0e0e0, #f0f0f0);
        background-size: 200% 100%;
        animation: skeleton-loading 1.5s infinite;
      }

      .skel-content {
        padding: 24px;
        flex: 1;
        display: flex;
        flex-direction: column;
      }

      .skel-label {
        width: 60px;
        height: 12px;
        background: #f0f0f0;
        border-radius: 4px;
        margin-bottom: 12px;
        position: relative;
        overflow: hidden;
      }

      .skel-label::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, #f0f0f0, #e0e0e0, #f0f0f0);
        background-size: 200% 100%;
        animation: skeleton-loading 1.5s infinite;
      }

      .skel-title {
        width: 80%;
        height: 24px;
        background: #f0f0f0;
        border-radius: 4px;
        margin-bottom: 12px;
        position: relative;
        overflow: hidden;
      }

      .skel-title::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, #f0f0f0, #e0e0e0, #f0f0f0);
        background-size: 200% 100%;
        animation: skeleton-loading 1.5s infinite;
      }

      .skel-title.short {
        width: 60%;
        margin-bottom: 0;
      }

      .skel-meta {
        width: 40%;
        height: 14px;
        background: #f0f0f0;
        border-radius: 4px;
        margin-top: auto;
        position: relative;
        overflow: hidden;
      }

      .skel-meta::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, #f0f0f0, #e0e0e0, #f0f0f0);
        background-size: 200% 100%;
        animation: skeleton-loading 1.5s infinite;
      }

      .result-image-placeholder + .result-type-icon {
        box-shadow: none;
      }

      .result-type-icon.page {
        background-color: #dbebfb;
        color: #0066cc;
      }

      .result-type-icon.blog {
        background-color: #fedddd;
        color: #e22626;
      }

      .result-type-icon.portfolio {
        color: #e68600;
        background-color: #fff4e5;
      }

      .dynamic-island-container:not(.visible):has([data-status="toast"])
        .dynamic-island[data-status="toast"] {
        transform: translateY(-70%) !important;
      }

      .k-section-title {
        font-size: var(--k-section-title-size);
        font-weight: var(--k-section-title-weight);
        margin-bottom: 0px;
      }

      .k-section-subtitle {
        color: var(--k-light-gray);
        font-size: var(--k-section-subtitle);
      }

      @media (max-width: 768px) {
        .tab-menu-container {
          top: 0px !important;
        }

        .hero-container {
          overflow: hidden;
        }

        .tabs-scroll-container {
          border-radius: 100px;
          box-shadow: inset 0 0 8px -4px #656565;
          padding: 4px;
          justify-content: flex-start !important;
        }

        .tabs-scroll-container.expanded {
          box-shadow: none;
        }

        [data-name="#Home"] {
          display: flex !important;
        }

        .k-section-title.center {
          text-align: center;
        }

        .text-gray-500 {
          color: #6b7280;
        }

        .mobile-topbar {
          display: flex;
        }

        .navbar {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          flex-direction: column;
          align-items: flex-start;
          transform: translateX(-100%);
          transition: transform 0.3s ease;
          overflow-y: auto;
          padding: 80px 24px 24px;
          z-index: var(--z-hover);
          box-shadow: none;
        }

        .navbar.mobile-open {
          transform: translateX(0);
        }

        .navbar .logo {
          display: none;
        }

        .section-label {
          display: block;
          font-size: 11px;
          text-transform: uppercase;
          color: #86868b;
          margin: 16px 0 8px;
          letter-spacing: 0.08em;
          font-weight: 600;
        }

        .menu-links {
          flex-direction: column;
          width: 100%;
          gap: 8px;
        }

        .menu-links > a {
          width: 100%;
          padding: 16px;
          background: #f8f8f8;
          border-radius: 12px;
          justify-content: flex-start;
          position: relative;
        }

        .menu-links .icon {
          display: flex;
          width: 24px;
          height: 24px;
          flex-shrink: 0;
        }

        .menu-links .icon svg {
          width: 100%;
          height: 100%;
        }

        .menu-links .label {
          flex: 1;
        }

        .menu-links > a[data-mega]::after {
          content: "›";
          font-size: 24px;
          color: #86868b;
          margin-left: auto;
        }

        .right-menu {
          width: 100%;
          margin-top: 16px;
          padding-top: 16px;
          border-top: 1px solid #d2d2d7;
        }

        .mega-menus-container {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: white;
          transform: translateX(100%);
          transition: transform 0.3s ease;
          overflow-y: auto;
          z-index: var(--z-menu);
          padding-top: 80px;
          -webkit-overflow-scrolling: touch;
        }

        .mega-menus-container.show {
          transform: translateX(0);
          z-index: var(--z-mobile-active);
        }

        .mega-menu {
          display: none;
          max-width: 100%;
          border-radius: 0;
          padding: 24px;
          box-shadow: none;
          position: relative;
        }

        .mega-menu.active {
          display: block;
        }

        .mega-content {
          grid-template-columns: 1fr;
          gap: 24px;
        }

        .mega-main {
          order: -1;
        }

        .mega-featured {
          flex-direction: column;
          text-align: center;
        }

        .featured-image {
          width: 120px;
          height: 120px;
          font-size: 60px;
        }

        body::before {
          content: "";
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.5);
          opacity: 0;
          pointer-events: none;
          transition: opacity 0.3s ease;
          z-index: var(--z-elevated);
        }

        body:has(.navbar.mobile-open)::before,
        body:has(.mega-menus-container.show)::before {
          opacity: 1;
          pointer-events: all;
        }

        .search-content {
          padding: 40px 20px 60px;
          overflow-y: auto;
          -webkit-overflow-scrolling: touch;
          max-height: 100vh;
        }

        .search-input {
          font-size: 22px;
        }

        [data-logo="klef-logo-desktop"] {
          display: none;
        }
      }

      .close-btn.toggle-menu:before {
        content: "Menu";
        left: 0;
        top: 0;
        width: 100%;
        text-align: center;
        transition: transform 0.3s ease;
      }

      .close-btn.toggle-menu:after {
        content: "Cerrar";
        position: absolute;
        left: 0;
        top: 100%;
        width: 100%;
        text-align: center;
        transition: transform 0.3s ease;
      }

      body[style*="hidden"] .close-btn:before {
        transform: translateY(calc(-100% - 8px));
      }

      body[style*="hidden"] .close-btn:after {
        transform: translateY(calc(-100% - 8px));
      }

      #logo {
        font-family: sans-serif;
        letter-spacing: 0;
        font-size: 20px;
        line-height: 24px;
        font-weight: 400;
        display: flex;
        align-items: center;
        gap: 5px;
        margin-left: 25px;
        color: #333333;
        text-decoration: none;
        pointer-events: all;
      }

      [data-logo="klef-logo-mobile"] #logo {
        margin-left: 0;
      }

      [aria-label="Tienda"] {
        display: none;
      }

      /* recursive flags */
      /* === 9. EFFECTS === */
      [style*="--blur:"] {
        backdrop-filter: blur(var(--blur));
        -webkit-backdrop-filter: blur(var(--blur));
      }

      [style*="--c:"] {
        color: var(--c);
      }

      /* VALUE PROP SECTION */
      .value-prop-statement {
        border-radius: 18px;
        background-image: linear-gradient(
          89.58deg,
          #eaeaea 0.28%,
          #ffffff 44.45%,
          #e5e7eb 99.55%
        );
        border: solid 1px #dedede;
        box-shadow: none;
        padding: 2rem 2rem 3.5rem 2rem;
        text-align: center;
      }

      @media (max-width: 768px) {
        .value-prop-statement {
          padding: 2rem 1rem 4rem 1rem;
        }
      }

      .value-prop-section blockquote {
        font-size: clamp(2rem, 5vw, 4rem);
      }

      /* CSS PROCESS SECTION */

      .k-process {
        padding: 4rem 0;
      }

      .k-process-title {
        text-align: center;
      }

      .k-section-subtitle {
        max-width: 32rem;
        margin: 1rem auto 3rem;
        font-size: 1rem;
        color: var(--k-gray);
      }

      .k-steps {
        display: flex;
        max-width: var(--k-max);
        margin: 0 auto;
        padding: 0 20px;
        padding-top: 20px;
      }

      .k-step {
        width: var(--k-step-w);
      }

      .k-step-head {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }

      .k-step-num {
        width: var(--k-num-size);
        height: var(--k-num-size);
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--k-light);
        border-radius: var(--k-radius);
        font-size: 1.875rem;
      }

      .k-step-line {
        display: flex;
        width: 80%;
        margin: 0 20px;
      }

      .k-step-line::before,
      .k-step-line::after {
        content: "";
        --wh: 9px;
        min-width: var(--wh);
        height: var(--wh);
        background-color: #000;
        display: flex;
        transform: rotate(45deg);
        margin: 5px;
      }

      .k-step-line i {
        min-width: 100px;
        height: 1em;
        background-image: url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='30px' height='30px' viewBox='0,0,256,256'%3E%3Cg fill='%23222222' fill-rule='nonzero' stroke='none' stroke-width='1' stroke-linecap='butt' stroke-linejoin='miter' stroke-miterlimit='10' stroke-dasharray='' stroke-dashoffset='0' font-family='none' font-weight='none' font-size='none' text-anchor='none' style='mix-blend-mode: normal'%3E%3Cg transform='scale(8.53333,8.53333)'%3E%3Cpath d='M5,13c-0.72127,-0.0102 -1.39216,0.36875 -1.75578,0.99175c-0.36361,0.623 -0.36361,1.39351 0,2.01651c0.36361,0.623 1.0345,1.00195 1.75578,0.99175h20c0.72127,0.0102 1.39216,-0.36875 1.75578,-0.99175c0.36361,-0.623 0.36361,-1.39351 0,-2.01651c-0.36361,-0.623 -1.0345,-1.00195 -1.75578,-0.99175z'%3E%3C/path%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        background-repeat: repeat-x;
        background-size: 1em 1em;
        width: 55%;
      }

      .k-step-title {
        display: inline-block;
        font-size: 1.25rem;
        font-weight: 500;
        margin-top: 2rem;
        margin-bottom: 1.25rem;
      }

      .k-step-text {
        font-size: 1rem;
        line-height: 1.5rem;
        color: var(--k-gray);
        padding-right: 1.25rem;
      }

      @media (max-width: 800px) {
        .k-steps {
          flex-direction: column;
          gap: var(--k-gap);
        }

        .k-step {
          display: flex;
          gap: 5vw;
        }

        .k-step-line {
          position: absolute;
          transform: rotate(90deg) translate(64px, 10px);
          max-width: 50px;
        }

        .k-step-line i {
          min-width: 50px;
        }
      }

      /* EVITAR ZOOM EN MOVIL */
      @media screen and (max-width: 768px) {
        input,
        textarea,
        select {
          font-size: 16px !important;
        }
      }

      .text-center {
        text-align: center;
      }

      [style*="--flex:"] {
        display: flex;
      }

      #services {
        border-top: 1px solid #e5e5e5;
        margin-top: 40px;
      }
    </style>

    <!-- Styles -->
    <!--<link rel="stylesheet" href="./assets/styles/design-system.css">-->
    <link rel="stylesheet" href="./shared/styles/glass-card.css" />
    <!-- Scripts -->
    <script src="./assets/scripts/scroll-lock.js"></script>
    <script src="./assets/scripts/mega-menu-spa.js"></script>
    <script
      src="./shared/components/navigation/navigation-system.js"
      defer
    ></script>

    <style>
      /* ============================================================================
           HERO SECTION STYLES (Monolithic)
           ============================================================================ */
      /* Hero Container */
      .hero-container {
        height: 900px;
        position: relative;
        background: #ffffff;
        color: #22323a;
      }

      .masonry-block {
        display: flex;
        width: 100%;
        flex-wrap: no-wrap;
        position: absolute;
        height: 700px;
        align-items: center;
        top: 0;
      }

      [class*="half-"] {
        width: 50%;
        height: 100%;
      }

      .half-left {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 2rem 3rem;
        position: relative;
        z-index: var(--z-10);
      }

      .half-right {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .hero-content {
        max-width: 540px;
      }

      .hero-content h2,
      .hero-content h2 + p {
        margin-left: 10px;
      }

      .hero-content .hero_title {
        font-weight: 700;
        font-size: 3rem;
        line-height: 1;
        margin: 0px;
      }

      .hero_text {
        color: #6b7280;
        font-size: 1.25rem;
        line-height: 1.75rem;
        margin: 1.5rem 0 2rem 0;
        margin-top: 0rem;
      }

      /* Text Animation */
      .word {
        position: absolute;
        opacity: 0;
      }

      .letter {
        display: inline-block;
        position: relative;
        transform: translateZ(25px);
        transform-origin: 50% 50% 25px;
      }

      .letter.out {
        transform: rotateX(90deg);
        transition: transform 0.32s cubic-bezier(0.55, 0.055, 0.675, 0.19);
      }

      .letter.behind {
        transform: rotateX(-90deg);
      }

      .letter.in {
        transform: rotateX(0deg);
        transition: transform 0.38s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }

      /* Colors */
      .purple {
        color: #8e44ad;
      }

      .azul {
        color: #2980b9;
      }

      .green {
        color: #16a085;
      }

      .oxido {
        color: #db4b10;
      }

      /* Images Masonry */
      .images_container {
        display: grid;
        row-gap: 32px;
        align-content: center;
      }

      .img_container {
        width: 13vw;
        height: auto;
        min-width: 150px;
      }

      .images_container img {
        max-width: 100%;
        height: auto;
        border-radius: 20px !important;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease;
      }

      .images_container img:hover {
        transform: scale(1.05);
      }

      .images_container:nth-child(2) {
        transform: translateY(0rem);
      }

      .images_container:not(:first-child) {
        margin-left: 32px;
      }

      /* Search Box in Hero */
      .white-shadow {
        background: #f5f6f7ba;
        padding: 2rem;
        border-radius: 18px;
        box-shadow: 0px 6px 54px 7px rgb(214 214 214);
        border: inset 1px #cccccc44;
      }

      .input-group {
        position: relative;
        display: flex;
        align-items: center;
        width: 100%;
      }

      .input-with-icon {
        position: relative;
        display: flex;
        align-items: center;
        width: 100%;
      }

      .input {
        height: 2.75rem;
        padding: 0 1rem;
        font-size: 1rem;
        border: 1px solid #d2d2d7;
        border-radius: 0.75rem;
        background: white;
        color: #1d1d1f;
        transition: all 0.2s ease;
        width: 100%;
      }

      .input-icon {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        color: #86868b;
        pointer-events: none;
        z-index: var(--z-10);
      }

      .input-icon-left {
        left: 0.875rem;
      }

      .input-has-icon-left {
        padding-left: 2.75rem;
      }

      /* Tags */
      #search-tags {
        display: flex;
        gap: 0.3rem;
        margin-left: 0.3rem;
        margin-top: 1rem;
        flex-wrap: wrap;
      }

      #search-tags > span {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        border-radius: 9999px;
        border: 1px solid;
        padding: 4px 10px;
        font-size: 12px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s ease;
        background-image: linear-gradient(90deg, #fff, #fff);
      }

      #search-tags > span:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      #search-tags > span svg {
        margin-right: 0.5rem;
        width: 1rem;
        height: 1rem;
      }

      .border-emerald-500 {
        border-color: #16a085;
        color: #16a085;
      }

      .border-amber-500 {
        border-color: #e68600;
        color: #e68600;
      }

      .border-blue-500 {
        border-color: #2980b9;
        color: #2980b9;
      }

      /* Skeleton Loading */
      .skeleton {
        position: relative;
        width: 100%;
        height: 100%;
        background: #f0f0f0;
        border-radius: 8px;
        overflow: hidden;
      }

      .brandLogo .skeleton {
        border-radius: 1000px;
        aspect-ratio: 1/1;
        --wh: 50px;
        width: var(--wh);
        height: var(--wh);
      }

      .skeleton img {
        opacity: 0;
        animation: fade-in 0.4s ease-in forwards;
      }

      .skeleton:not(.loaded)::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, #f0f0f0, #e0e0e0, #f0f0f0);
        background-size: 200% 100%;
        animation: skeleton-loading 1.5s infinite;
      }

      @keyframes skeleton-loading {
        0% {
          background-position: 200% 0;
        }

        100% {
          background-position: -200% 0;
        }
      }

      @keyframes fade-in {
        to {
          opacity: 1;
        }
      }

      .loaded {
        background: none;
      }

      .loaded::after {
        display: none;
      }

      /* Brands Carousel */
      .brandsCarousel {
        max-height: 100px;
        margin: auto;
        overflow: hidden;
        position: relative;
        box-shadow: 0px -16px 20px 20px #fff;
        background: white;
        padding-bottom: 2rem;
      }

      .carouselTrack {
        display: flex;
        width: calc(100px * 20);
        animation: infiniteLoop 20s linear infinite;
      }

      @keyframes infiniteLoop {
        0% {
          transform: translate3d(0, 0, 0);
        }

        100% {
          transform: translate3d(calc(-100px * 10), 0, 0);
        }
      }

      .brandLogo {
        width: 100px;
        height: 95px;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
      }

      .brandLogo img {
        max-width: 80%;
        max-height: 80%;
        object-fit: contain;
      }

      /* Responsive */
      @media screen and (max-width: 1024px) {
        .img_container {
          width: 11vw;
        }
      }

      @media screen and (max-width: 768px) {
        .hero-container {
          height: auto;
          margin-top: 4rem;
          margin-bottom: 0px;
        }

        .masonry-block {
          flex-direction: column-reverse;
          height: auto;
          position: relative;
        }

        [class*="half-"] {
          width: var(--fill);
        }

        .half-left {
          order: 2;
          padding: 2rem 1.5rem;
        }

        .half-right {
          order: 1;
          height: 400px;
          margin-top: 2rem;
        }

        .white-shadow {
          padding: 2rem 1rem;
        }
      }

      .fade {
        pointer-events: none;
        background: linear-gradient(
          90deg,
          #ffffff,
          transparent 30%,
          transparent 70%,
          #ffffff
        );
        position: absolute;
        inset: 0;
        z-index: var(--z-1);
        transform: scale(1.1);
        max-width: var(--k-max);
      }

      #services-scroll {
        max-width: var(--k-max);
        margin: 0 auto;
      }

      /* Shimmer effect para el input */
      @keyframes shimmer {
        0% {
          background-position: -1000px 0;
        }

        100% {
          background-position: 1000px 0;
        }
      }

      #klef-search.shimmer-active {
        --shimmer-color-1: #ffffff;
        --shimmer-color-2: #f0f0f0;
        --shimmer-color-3: #c8e1f2;

        background: linear-gradient(
          90deg,
          var(--shimmer-color-1) 0%,
          var(--shimmer-color-2) 20%,
          var(--shimmer-color-3) 40%,
          var(--shimmer-color-2) 60%,
          var(--shimmer-color-1) 100%
        );

        background-size: 1000px 100%;
        animation: shimmer 1.5s infinite linear;
        transition: background 0.3s ease;
      }

      [data-mega="#Marketing"]:hover [data-mega="#Marketing"] {
        background-color: var(--strategy-hover);
      }

      [data-mega="#Tecnologia"]:hover [data-mega="#Tecnologia"] {
        background-color: var(--dev-hover);
      }

      [data-mega="#Diseno"]:hover [data-mega="#Diseno"] {
        background-color: var(--brands-hover);
      }
    </style>
    <style>
      :root {
        --margin: 40px;
        --padding: 20px;
        --m-spacing: calc(var(--margin) / 2);
        --p-spacing: calc(var(--padding) / 2);
        --container-limit: calc(1200px + var(--m-spacing) + var(--p-spacing));
        --primary-black: #1a1a1a;
        --accent-blue: #007aff;
        --brands: rgba(245, 124, 0, 0.9);
        --strategy: rgba(47, 96, 253, 0.9);
        --studio: rgba(223, 0, 110, 0.9);
        --dev: rgba(56, 142, 60, 0.9);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      .container:not(.brandsCarousel) {
        max-width: var(--container-limit);
        margin: 0 auto;
      }

      /* TAB MENU STYLES */
      .tab-menu-container {
        max-width: var(--container-limit);
        margin: 0 auto;
        position: sticky;
        top: 60px;
        z-index: var(--z-dropdown);
        margin-bottom: 30px;
      }

      .tab-menu-wrapper {
        display: flex;
        align-items: center;
        gap: 12px;
        background: white;
        padding: 12px 16px;
        border-radius: 60px;
        border-top: 1px solid #e7eefc;
        transition: all 0.3s ease;
        box-shadow:
          0 0 1px 0 rgba(24, 94, 224, 0.15),
          0 6px 12px 0 rgba(24, 94, 224, 0.15);
        margin-bottom: 5rem;
      }

      #portfolio-section .search-wrapper {
        position: relative;
        display: flex;
        align-items: center;
        height: 48px;
        min-width: 48px;
      }

      .search-input-portfolio {
        width: 48px;
        height: 48px;
        padding: 0;
        border: 1px solid #d0d0d0;
        border-radius: 50px;
        background: white;
        color: transparent;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        outline: none;
      }

      .search-icon-portfolio {
        position: absolute;
        left: 14px;
        pointer-events: none;
        display: flex;
        color: #5f6368;
      }

      #is-searching:checked + .tab-menu-wrapper .tabs-scroll-container {
        box-shadow: none;
        display: none;
      }

      #is-searching:checked + .tab-menu-wrapper .tabs-list {
        width: 0;
        opacity: 0;
        pointer-events: none;
        overflow: hidden;
      }

      #is-searching:checked + .tab-menu-wrapper .search-wrapper {
        flex: 1;
        width: -webkit-fill-available;
      }

      #is-searching:checked + .tab-menu-wrapper .search-input-portfolio {
        width: 100%;
        padding: 0 20px 0 45px;
        color: var(--primary-black);
        cursor: text;
        border-color: var(--primary-black);
      }

      #is-searching:checked
        + .tab-menu-wrapper
        .search-input-portfolio::placeholder {
        color: #999;
      }

      #is-searching:checked + .tab-menu-wrapper .tabs-scroll-container {
        position: absolute;
      }

      .tabs-scroll-container {
        flex: 1;
        overflow-x: auto;
        overflow-y: hidden;
        display: flex;
        align-items: center;
        scrollbar-width: none;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        justify-content: center;
        padding-bottom: 1px;
      }

      .tabs-scroll-container::-webkit-scrollbar {
        display: none;
      }

      .tabs-list {
        display: flex;
        flex-wrap: nowrap;
        gap: 10px;
        list-style: none;
        transition: all 0.3s ease;
      }

      .tab-button {
        position: relative;
        padding: 10px 35px 10px 22px;
        border-radius: 50px;
        border: 1px solid #d0d0d0;
        background: white;
        color: #5f6368;
        font-size: 14px;
        font-weight: 500;
        white-space: nowrap;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .tab-button.active {
        background: var(--primary-black);
        color: white;
        border-color: var(--primary-black);
      }

      .has-sub-indicator {
        position: absolute;
        right: 12px;
        top: 50%;
        transform: translateY(-50%);
        width: 8px;
        height: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
      }

      .has-sub-indicator::after {
        content: "";
        width: 5px;
        height: 5px;
        border-right: 2px solid currentColor;
        border-bottom: 2px solid currentColor;
        transform: rotate(45deg);
        display: block;
      }

      .tab-button.active .has-sub-indicator {
        transform: translateY(-50%) rotate(90deg);
        color: white;
      }

      .menu-toggle-btn {
        display: none;
        flex-shrink: 0;
        width: 48px;
        height: 48px;
        border-radius: 50%;
        background: var(--primary-black);
        color: white;
        border: none;
        cursor: pointer;
        align-items: center;
        justify-content: center;
      }

      .desktop-sub-chips {
        position: absolute;
        top: 100%;
        left: 0;
        transform: translateY(10px);
        display: flex;
        gap: 8px;
        padding: 10px;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }

      .desktop-sub-chips.active {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
      }

      .sub-chip {
        padding: 6px 16px;
        background: white;
        border: 1px solid #d0d0d0;
        border-radius: 20px;
        font-size: 13px;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .sub-chip:hover {
        background: #f5f5f5;
        border-color: var(--primary-black);
      }

      .sub-chip.active {
        background: var(--primary-black);
        color: white;
        border-color: var(--primary-black);
      }

      .mobile-thumb-dock {
        position: fixed;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%) translateY(150px);
        width: calc(100% - 40px);
        max-width: 450px;
        background: rgba(26, 26, 26, 0.9);
        backdrop-filter: blur(10px);
        padding: 12px;
        border-radius: 24px;
        display: flex;
        gap: 10px;
        overflow-x: auto;
        scrollbar-width: none;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        z-index: var(--z-floating);
      }

      .mobile-thumb-dock::-webkit-scrollbar {
        display: none;
      }

      .mobile-thumb-dock.active {
        transform: translateX(-50%) translateY(0);
      }

      .sub-chip-mobile {
        padding: 10px 20px;
        background: rgba(255, 255, 255, 0.15);
        color: white;
        border-radius: 15px;
        white-space: nowrap;
        font-size: 14px;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .sub-chip-mobile:hover {
        background: rgba(255, 255, 255, 0.25);
      }

      .sub-chip-mobile.active {
        background: white;
        color: var(--primary-black);
      }

      .tabs-scroll-container.expanded {
        overflow: visible;
      }

      .tabs-scroll-container.expanded .tabs-list {
        flex-wrap: wrap;
        padding: 10px 0;
      }

      @media (min-width: 1000px) {
        .tab-menu-container:has(.expanded) .tab-menu-wrapper {
          border-radius: 24px;
        }
      }

      .search-input-portfolio:not(:focus)::placeholder {
        color: transparent;
      }

      @media (max-width: 999px) {
        .menu-toggle-btn {
          display: flex;
        }
      }

      @media (max-width: 768px) {
        .desktop-sub-chips {
          display: none;
        }
      }

      @media (min-width: 769px) {
        .mobile-thumb-dock {
          display: none;
        }
      }

      /* PORTFOLIO CARDS */

      #portfolio-section {
        max-width: var(--k-max);
        margin: 0 auto;
      }

      #results-count {
        display: block;
        margin-bottom: 20px;
        font-size: 1.1rem;
        color: #666;
        font-weight: 500;
        text-align: center;
      }

      .card-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(313px, 1fr));
        gap: 30px;
        margin-bottom: 40px;
        justify-items: center;
      }

      .card {
        --bg: #fff;
        --title-color: #fff;
        --title-color-hover: #000;
        --text-color: #666;
        --button-color: #eee;
        --button-color-hover: #ddd;
        background: var(--bg);
        border-radius: 2rem;
        padding: 0.5rem;
        width: 20rem;
        height: 32rem;
        overflow: clip;
        position: relative;
        font-family: Lato, Montserrat, Helvetica, Arial, sans-serif;
      }

      .card.dark {
        --bg: #222;
        --title-color: #fff;
        --title-color-hover: #fff;
        --text-color: #ccc;
        --button-color: #555;
        --button-color-hover: #444;
      }

      .card::before {
        content: "";
        position: absolute;
        width: calc(100% - 1rem);
        height: 10rem;
        bottom: 0.5rem;
        left: 0.5rem;
        mask: linear-gradient(#0000, #000f 80%);
        backdrop-filter: blur(1rem);
        border-radius: 0 0 1.5rem 1.5rem;
        translate: 0 0;
        transition: translate 0.25s;
      }

      .card > img {
        max-width: 100%;
        aspect-ratio: 2 / 3;
        object-fit: cover;
        object-position: 50% 5%;
        border-radius: 1.5rem;
        display: block;
        transition:
          aspect-ratio 0.25s,
          object-position 0.5s;
        width: 100%;
        height: auto;
      }

      .card > section {
        margin: 1rem;
        height: 10rem;
        display: flex;
        flex-direction: column;
      }

      .card > section .project-header {
        display: flex;
        align-items: center;
        gap: 1rem;
      }

      .card > section .project-header .project-logo img {
        width: 3rem;
        height: 3rem;
        object-fit: cover;
        border-radius: 0.5rem;
      }

      .card > section .project-header .project-title {
        display: flex;
        flex-direction: column;
      }

      .card > section .project-header .project-title h2 {
        margin: 0;
        margin-block-end: 0.5rem;
        font-size: 1.25rem;
        color: var(--title-color);
        transition:
          color 0.5s,
          margin-block-end 0.25s;
      }

      .card > section .project-header .project-title * {
        color: var(--text-color);
      }

      .card > section .project-header .project-title h2 small {
        font-size: 0.8em;
        opacity: 0.8;
      }

      .card > section .project-header .project-title span {
        font-size: 0.85rem;
        color: var(--text-color);
        opacity: 0.7;
      }

      .card > section p {
        font-size: 0.95rem;
        line-height: 1.3;
        color: var(--text-color);
        opacity: 0;
        margin: 0;
        margin-block-end: 0.5rem;
        translate: 0 100%;
        transition:
          margin-block-end 0.25s,
          opacity 1s 0.2s,
          translate 0.25s 0.2s;
        display: -webkit-box;
        line-clamp: 3;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
        min-height: 60px;
      }

      .card > section .project-actions {
        flex: 1;
        align-items: flex-end;
        display: flex;
        justify-content: space-between;
        translate: 0 100%;
        opacity: 0;
        transition:
          translate 0.25s 0.2s,
          opacity 1s;
      }

      .card > section .project-actions .tag-portfolio {
        align-self: center;
        color: var(--title-color-hover);
      }

      .card > section .project-actions button {
        border: 1px solid #0000;
        border-radius: 1.25rem 1.25rem 1.5rem 1.25rem;
        font-size: 1rem;
        padding: 1rem 1.5rem 1rem 3rem;
        translate: 1rem;
        background: var(--button-color);
        transition: background 0.33s;
        outline-offset: 2px;
        position: relative;
        color: var(--title-color-hover);
        width: fit-content;
        text-align: center;
        cursor: pointer;
      }

      .card > section .project-actions button::before,
      .card > section .project-actions button::after {
        content: "";
        width: 0.85rem;
        height: 0.1rem;
        background: currentcolor;
        position: absolute;
        top: 50%;
        left: 1.33rem;
        border-radius: 1rem;
      }

      .card > section .project-actions button::after {
        rotate: 90deg;
        transition: rotate 0.15s;
      }

      .card > section .project-actions button.following::after {
        rotate: 0deg;
      }

      .card > section .project-actions button:hover {
        background: var(--button-color-hover);
      }

      .card > section .project-actions button:focus {
        outline: 2px solid var(--text-color);
      }

      .category-tag {
        display: inline-block;
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: 600;
        width: fit-content;
        position: absolute;
        top: 1.5rem;
        left: 1.5rem;
        z-index: var(--z-10);
        backdrop-filter: blur(10px);
        color: white;
      }

      .tag-brands {
        background-color: var(--brands);
      }

      .tag-dev {
        background-color: var(--dev);
      }

      .tag-studio {
        background-color: var(--studio);
      }

      .tag-strategy {
        background-color: var(--strategy);
      }

      .card:not(:hover):not(:focus-within) .project-header {
        translate: 0 -50px;
        z-index: var(--z-1);
      }

      .project-title h2 + span {
        text-transform: lowercase;
      }

      .card:hover::before,
      .card:focus-within::before {
        translate: 0 100%;
      }

      .card:hover > img,
      .card:focus-within > img {
        aspect-ratio: 1 / 1;
        object-position: 50% 10%;
        transition:
          aspect-ratio 0.25s,
          object-position 0.25s;
      }

      .card:hover > section p,
      .card:focus-within > section p {
        translate: 0 0;
        opacity: 1;
      }

      .card:hover > section h2,
      .card:focus-within > section h2 {
        color: var(--title-color-hover);
      }

      .card:hover > section .project-actions,
      .card:focus-within > section .project-actions {
        translate: 0 0;
        opacity: 1;
        transition:
          translate 0.25s 0.25s,
          opacity 0.5s 0.25s;
      }

      /**/
      main section {
        margin: 5rem 0;
      }

      #main-nav:hover {
        z-index: 1002;
      }

      /*#main-nav:hover+.mega-menus-container,
    .mega-menus-container {
      z-index: 1001;
    }*/

      /**/
      #portfolio-section .island-btn.accent {
        max-width: fit-content;
      }

      @media (max-width: 767px) {
        #portfolio-section .island-btn.accent {
          max-width: fit-content;
        }
      }

      .btn-icon:has([href="#phone"]) {
        width: fit-content;
        height: fit-content;
        border-radius: 35px;
        padding: 10px;
        background-color: #efefef;
        color: #474747;
        gap: 2px;
      }

      .vertical-line {
        width: 1.7px;
        height: 20px;
        background-color: #888888;
        display: block;
        margin: 0 5px;
      }

      [style*="--mt"] {
        margin-top: var(--mt);
      }

      [style*="--mb"] {
        margin-bottom: var(--mb);
      }
    </style>
  </head>

  <body>
    <div id="svg-symbols" style="display: none">
      <svg id="sprite" xmlns="http://www.w3.org/2000/svg">
        <symbol id="icon-globe" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
          ></path>
        </symbol>
        <symbol id="icon-code-app" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M14.25 9.75 16.5 12l-2.25 2.25m-4.5 0L7.5 12l2.25-2.25M6 20.25h12A2.25 2.25 0 0 0 20.25 18V6A2.25 2.25 0 0 0 18 3.75H6A2.25 2.25 0 0 0 3.75 6v12A2.25 2.25 0 0 0 6 20.25Z"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
          ></path>
        </symbol>
        <symbol id="icon-code" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
          ></path>
        </symbol>
        <symbol id="icon-book" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
          ></path>
        </symbol>
        <symbol id="icon-paint" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M9.53 16.122a3 3 0 0 0-5.78 1.128 2.25 2.25 0 0 1-2.4 2.245 4.5 4.5 0 0 0 8.4-2.245c0-.399-.078-.78-.22-1.128Zm0 0a15.998 15.998 0 0 0 3.388-1.62m-5.043-.025a15.994 15.994 0 0 1 1.622-3.395m3.42 3.42a15.995 15.995 0 0 0 4.764-4.648l3.876-5.814a1.151 1.151 0 0 0-1.597-1.597L14.146 6.32a15.996 15.996 0 0 0-4.649 4.763m3.42 3.42a6.776 6.776 0 0 0-3.42-3.42"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
          ></path>
        </symbol>
        <symbol id="icon-folder" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
          ></path>
        </symbol>
        <symbol id="icon-star-sparks" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
          ></path>
        </symbol>
        <symbol id="icon-modules" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M2.25 7.125C2.25 6.504 2.754 6 3.375 6h6c.621 0 1.125.504 1.125 1.125v3.75c0 .621-.504 1.125-1.125 1.125h-6a1.125 1.125 0 0 1-1.125-1.125v-3.75ZM14.25 8.625c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v8.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-8.25ZM3.75 16.125c0-.621.504-1.125 1.125-1.125h5.25c.621 0 1.125.504 1.125 1.125v2.25c0 .621-.504 1.125-1.125 1.125h-5.25a1.125 1.125 0 0 1-1.125-1.125v-2.25Z"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
          ></path>
        </symbol>
        <symbol id="icon-stacked-list" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
          ></path>
        </symbol>
        <symbol id="icon-home" viewBox="0 0 24 24">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
          ></path>
        </symbol>
        <symbol id="icon-color-palette" viewBox="0 0 24 24">
          <circle cx="13.5" cy="6.5" r=".5" fill="currentColor"></circle>
          <circle cx="17.5" cy="10.5" r=".5" fill="currentColor"></circle>
          <circle cx="8.5" cy="7.5" r=".5" fill="currentColor"></circle>
          <circle cx="6.5" cy="12.5" r=".5" fill="currentColor"></circle>
          <path
            d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          ></path>
        </symbol>
        <symbol id="icon-search" viewBox="0 0 256 256">
          <g
            fill="currentColor"
            fill-rule="nonzero"
            stroke="none"
            stroke-width="1"
            stroke-linecap="butt"
            stroke-linejoin="miter"
            stroke-miterlimit="10"
            style="mix-blend-mode: normal"
          >
            <g transform="scale(8.53333,8.53333)">
              <path
                d="M13,3c-5.511,0 -10,4.489 -10,10c0,5.511 4.489,10 10,10c2.39651,0 4.59738,-0.85101 6.32227,-2.26367l5.9707,5.9707c0.25082,0.26124 0.62327,0.36648 0.97371,0.27512c0.35044,-0.09136 0.62411,-0.36503 0.71547,-0.71547c0.09136,-0.35044 -0.01388,-0.72289 -0.27512,-0.97371l-5.9707,-5.9707c1.41266,-1.72488 2.26367,-3.92576 2.26367,-6.32227c0,-5.511 -4.489,-10 -10,-10zM13,5c4.43012,0 8,3.56988 8,8c0,4.43012 -3.56988,8 -8,8c-4.43012,0 -8,-3.56988 -8,-8c0,-4.43012 3.56988,-8 8,-8z"
              ></path>
            </g>
          </g>
        </symbol>
        <symbol id="shop-bag" data-name="Capa 2" viewBox="0 0 9.77 12.09">
          <defs>
            <style>
              .cls-1 {
                fill: currentColor;
                stroke-width: 0px;
              }
            </style>
          </defs>
          <g id="Capa_1-2" data-name="Capa 1">
            <path
              class="cls-1"
              d="m7.41,2.32h-.08l-.56-1.27-.05-.09C6.29.35,5.62,0,4.89,0c0,0,0,0,0,0-.73,0-1.4.35-1.84.96l-.61,1.36h-.08c-1.3,0-2.36,1.06-2.36,2.36v5.06c0,1.3,1.06,2.36,2.36,2.36h5.06c1.3,0,2.36-1.06,2.36-2.36v-5.06c0-1.3-1.06-2.36-2.36-2.36Zm-3.53-.82c.25-.32.59-.54,1-.5.39,0,.75.18.99.5l.36.82h-2.72l.36-.82Zm4.88,8.23c0,.75-.61,1.36-1.36,1.36H2.36c-.75,0-1.36-.61-1.36-1.36v-5.06c0-.75.61-1.35,1.35-1.36h5.07c.75,0,1.35.61,1.35,1.36v5.06Z"
            ></path>
          </g>
        </symbol>
        <symbol
          id="arrow-up"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="size-6"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="m15 11.25-3-3m0 0-3 3m3-3v7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"
          ></path>
        </symbol>
        <symbol
          id="icon-megaphone"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="size-6"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M10.34 15.84c-.688-.06-1.386-.09-2.09-.09H7.5a4.5 4.5 0 1 1 0-9h.75c.704 0 1.402-.03 2.09-.09m0 9.18c.253.962.584 1.892.985 2.783.247.55.06 1.21-.463 1.511l-.657.38c-.551.318-1.26.117-1.527-.461a20.845 20.845 0 0 1-1.44-4.282m3.102.069a18.03 18.03 0 0 1-.59-4.59c0-1.586.205-3.124.59-4.59m0 9.18a23.848 23.848 0 0 1 8.835 2.535M10.34 6.66a23.847 23.847 0 0 0 8.835-2.535m0 0A23.74 23.74 0 0 0 18.795 3m.38 1.125a23.91 23.91 0 0 1 1.014 5.395m-1.014 8.855c-.118.38-.245.754-.38 1.125m.38-1.125a23.91 23.91 0 0 0 1.014-5.395m0-3.46c.495.413.811 1.035.811 1.73 0 .695-.316 1.317-.811 1.73m0-3.46a24.347 24.347 0 0 1 0 3.46"
          ></path>
        </symbol>
        <symbol
          id="icon-page"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
        >
          <path
            d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <polyline
            points="14 2 14 8 20 8"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </symbol>
        <symbol
          id="icon-post"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
        >
          <path
            d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
          <path
            d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </symbol>
        <symbol
          id="icon-portfolio"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
        >
          <circle cx="13.5" cy="6.5" r=".5" stroke-width="2" />
          <circle cx="17.5" cy="10.5" r=".5" stroke-width="2" />
          <circle cx="8.5" cy="7.5" r=".5" stroke-width="2" />
          <circle cx="6.5" cy="12.5" r=".5" stroke-width="2" />
          <path
            d="M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          />
        </symbol>
        <symbol
          id="x-circle"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="size-6"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"
          />
        </symbol>
        <!--  id="phone" -->
        <symbol
          id="phone"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="1.7"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="lucide lucide-phone-icon lucide-phone"
        >
          <path
            d="M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384"
          />
        </symbol>
        <symbol
          id="squircle-message"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="size-6"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="M8.625 9.75a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 0 1 .778-.332 48.294 48.294 0 0 0 5.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0 0 12 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018Z"
          />
        </symbol>
      </svg>
    </div>
    <!-- Mobile Topbar -->
    <div class="mobile-topbar">
      <div data-logo="klef-logo-mobile">
        <a id="logo" href="/" class="no-image">
          <img
            src="./assets/images/favicons/klef-logo.png"
            alt="Logo de Klef Agency"
            width="30"
            height="30"
          />
          Klef Agency
        </a>
      </div>
      <button
        class="close-btn toggle-menu"
        aria-label="Toggle menu"
        data-action="toggle-menu"
      >
        <!-- Menu -->
      </button>
    </div>

    <!-- Mega Topbar -->
    <div class="mega-topbar">
      <button
        class="back-btn"
        data-action="go-back"
        aria-label="Volver al menú anterior"
      >
        Volver
      </button>
      <button
        class="close-btn"
        data-action="close-menu"
        aria-label="Cerrar menú de navegación"
      >
        Cerrar
      </button>
    </div>

    <!-- Main Navigation -->
    <nav class="navbar" id="main-nav">
      <div data-logo="klef-logo-desktop">
        <a id="logo" href="/" class="no-image">
          <img
            src="./assets/images/favicons/klef-logo.png"
            alt="Klef Logo"
            width="30"
            height="30"
          />
          Klef Agency
        </a>
      </div>

      <div class="menu-links">
        <div class="section-label">MENÚ</div>

        <a
          href="#"
          data-mega="#Diseno"
          data-name="#Diseno"
          aria-label="Sección Diseño y Media"
        >
          <span class="icon">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              style="--wh: 20px; width: var(--wh); height: var(--wh)"
            >
              <use href="#icon-color-palette"></use>
            </svg>
          </span>
          <span class="label">Diseño y Media</span>
        </a>

        <a
          href="#"
          data-mega="#Tecnologia"
          data-name="#Tecnologia"
          aria-label="Sección Tecnología"
        >
          <span class="icon">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              style="--wh: 20px; width: var(--wh); height: var(--wh)"
            >
              <use href="#icon-code"></use>
            </svg>
          </span>
          <span class="label">Tecnología</span>
        </a>

        <a
          href="#"
          data-mega="#Marketing"
          data-name="#Marketing"
          aria-label="Sección Marketing"
        >
          <span class="icon">
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              style="--wh: 20px; width: var(--wh); height: var(--wh)"
            >
              <use href="#icon-megaphone"></use>
            </svg>
          </span>
          <span class="label">Marketing</span>
        </a>
      </div>

      <div class="right-menu">
        <button class="btn-icon" data-action="open-search" aria-label="Buscar">
          <svg
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            style="--wh: 20px; width: var(--wh); height: var(--wh)"
          >
            <use href="#icon-search"></use>
          </svg>
        </button>
        <button class="btn-icon" aria-label="Phone">
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <use href="#phone"></use>
          </svg>
          <div class="vertical-line"></div>
          <!-- squircle-message   -->
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <use href="#squircle-message"></use>
          </svg>
        </button>
      </div>
    </nav>

    <!-- Mega Menus Container -->
    <div class="mega-menus-container">
      <!-- Diseño y Media -->
      <div class="mega-menu" id="Diseno">
        <div class="mega-content">
          <div class="mega-sidebar">
            <div class="mega-sidebar-title">Diseño y Media</div>
            <a href="#" aria-label="Ver proyectos de Branding">
              <span>Branding</span>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 5l7 7-7 7"
                />
              </svg>
            </a>
            <a href="#" aria-label="Ver proyectos de Studio Multimedia">
              <span>Studio Multimedia</span>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 5l7 7-7 7"
                />
              </svg>
            </a>
            <a href="#" aria-label="Ver proyectos de Publicidad">
              <span>Publicidad</span>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 5l7 7-7 7"
                />
              </svg>
            </a>
          </div>
          <div class="mega-main">
            <div class="mega-featured">
              <div class="featured-image">🎨</div>
              <div class="featured-content">
                <div class="featured-tag">By Klef•Brand</div>
                <h3>Branding</h3>
                <p>
                  Descubre las marcas que hemos desarrollado y nuestras
                  estrategias de diseño
                </p>
                <a href="#" class="btn-primary">Ir a Brands</a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Tecnología -->
      <div class="mega-menu" id="Tecnologia">
        <div class="mega-content">
          <div class="mega-sidebar">
            <div class="mega-sidebar-title">Tecnología</div>
            <a href="#" aria-label="Ver proyectos de Desarrollo Web">
              <span>Desarrollo Web</span>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 5l7 7-7 7"
                />
              </svg>
            </a>
            <a href="#" aria-label="Ver proyectos de Apps Móviles">
              <span>Apps Móviles</span>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 5l7 7-7 7"
                />
              </svg>
            </a>
            <a href="#" aria-label="Ver proyectos de E-commerce">
              <span>E-commerce</span>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 5l7 7-7 7"
                />
              </svg>
            </a>
          </div>
          <div class="mega-main">
            <div class="mega-featured">
              <div
                class="featured-image"
                style="background: linear-gradient(135deg, #c0e8ff, #a3c7ff)"
              >
                💻
              </div>
              <div class="featured-content">
                <div class="featured-tag">By Klef•Tech</div>
                <h3>Desarrollo Web</h3>
                <p>
                  Soluciones tecnológicas modernas y escalables para tu negocio
                </p>
                <a href="#" class="btn-primary">Ver Proyectos</a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Marketing -->
      <div class="mega-menu" id="Marketing">
        <div class="mega-content">
          <div class="mega-sidebar">
            <div class="mega-sidebar-title">Marketing</div>
            <a href="#" aria-label="Ver proyectos de Social Media">
              <span>Social Media</span>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 5l7 7-7 7"
                />
              </svg>
            </a>
            <a href="#" aria-label="Ver estrategias SEO/SEM">
              <span>SEO/SEM</span>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 5l7 7-7 7"
                />
              </svg>
            </a>
            <a href="#" aria-label="Ver estrategias de Content Strategy">
              <span>Content Strategy</span>
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M9 5l7 7-7 7"
                />
              </svg>
            </a>
          </div>
          <div class="mega-main">
            <div class="mega-featured">
              <div
                class="featured-image"
                style="background: linear-gradient(135deg, #d4f1d4, #a3e6a3)"
              >
                📊
              </div>
              <div class="featured-content">
                <div class="featured-tag">By Klef•Marketing</div>
                <h3>Marketing Digital</h3>
                <p>Estrategias data-driven para impulsar tu presencia online</p>
                <a href="#" class="btn-primary">Conocer Más</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Search Overlay -->
    <div class="search-overlay" id="searchOverlay">
      <div class="search-panel">
        <button
          class="close-search"
          aria-label="Close search"
          data-action="close-search"
        >
          <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M6 18L18 6M6 6l12 12"
            />
          </svg>
        </button>
        <div class="search-content">
          <div class="search-input-wrapper">
            <div class="search-icon">
              <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                />
              </svg>
            </div>
            <input
              type="text"
              class="search-input"
              placeholder="Buscar en klef.agency"
              id="searchInput"
              autocomplete="off"
              spellcheck="false"
            />
            <button
              type="button"
              class="clear-input"
              id="clearInput"
              aria-label="Limpiar búsqueda"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 20 20"
                fill="currentColor"
                class="size-5"
              >
                <path
                  fill-rule="evenodd"
                  d="M7.22 3.22A.75.75 0 0 1 7.75 3h9A2.25 2.25 0 0 1 19 5.25v9.5A2.25 2.25 0 0 1 16.75 17h-9a.75.75 0 0 1-.53-.22L.97 10.53a.75.75 0 0 1 0-1.06l6.25-6.25Zm3.06 4a.75.75 0 1 0-1.06 1.06L10.94 10l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 11.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 10l1.72-1.72a.75.75 0 0 0-1.06-1.06L12 8.94l-1.72-1.72Z"
                  clip-rule="evenodd"
                />
              </svg>
            </button>
            <label for="searchInput" class="section-label"></label>
          </div>
          <div class="quick-suggestions" id="quickSuggestions">
            <div class="suggestions-grid">
              <div class="suggestion-section">
                <div class="suggestion-title">Sugerencias</div>
                <ul class="suggestion-list">
                  <li>
                    <a
                      href="#"
                      data-action="search-suggestion"
                      data-term="portfolio"
                    >
                      <svg
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M13 10V3L4 14h7v7l9-11h-7z"
                        ></path>
                      </svg>
                      Portfolio
                    </a>
                  </li>
                  <li>
                    <a
                      href="#"
                      data-action="search-suggestion"
                      data-term="servicios"
                    >
                      <svg
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M13 10V3L4 14h7v7l9-11h-7z"
                        ></path>
                      </svg>
                      Servicios
                    </a>
                  </li>
                  <li>
                    <a
                      href="#"
                      data-action="search-suggestion"
                      data-term="contacto"
                    >
                      <svg
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M13 10V3L4 14h7v7l9-11h-7z"
                        ></path>
                      </svg>
                      Contacto
                    </a>
                  </li>
                </ul>
              </div>
              <div class="suggestion-section">
                <div class="suggestion-title">Búsquedas recientes</div>
                <ul class="suggestion-list" id="recentSearches">
                  <li>
                    <a
                      href="#"
                      data-action="search-suggestion"
                      data-term="diseño web"
                    >
                      <svg
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                        ></path>
                      </svg>
                      diseño web
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <div id="resultsContainer"></div>
        </div>
      </div>
    </div>

    <!-- SEO IMAGES BLOCK - Hidden but indexable (SYMBOLS) -->
    <div id="seo-images" style="display: none">
      <!-- Hero Masonry Images - SEO Optimized -->

      <!-- Logos Carousel -->
      <img
        data-id="logo-carousel-1"
        src="./assets/images/brands/Logos-Web-17.png"
        alt="Cliente, Baja Smart Real Estate"
        loading="eager"
        data-fetch="high"
        data-priority="high"
      />
      <img
        data-id="logo-carousel-2"
        src="./assets/images/brands/Logos-Web-08.png"
        alt="Cliente, Tesoro Los Cabos"
        loading="eager"
        data-fetch="high"
        data-priority="high"
      />
      <img
        data-id="logo-carousel-3"
        src="./assets/images/brands/Logos-Web-12.png"
        alt="Cliente, T1me and Co."
        loading="eager"
        data-fetch="high"
        data-priority="high"
      />
      <img
        data-id="logo-carousel-4"
        src="./assets/images/brands/Logos-Web-13.png"
        alt="Cliente, Punta Medano Restaurant, Ceviche Bar"
        loading="eager"
        data-fetch="high"
        data-priority="high"
      />
      <img
        data-id="logo-carousel-5"
        src="./assets/images/brands/Logos-Web-09.png"
        alt="Cliente, Collection AHAU"
        loading="eager"
        data-fetch="high"
        data-priority="high"
      />
      <img
        data-id="logo-carousel-6"
        src="./assets/images/brands/Logos-Web-07.png"
        alt="Cliente, Diamonds International Jewerly "
        loading="eager"
        data-fetch="high"
        data-priority="high"
      />
      <img
        data-id="logo-carousel-7"
        src="./assets/images/brands/Logos-Web-10.png"
        alt="Cliente, Animalón by the sea"
        loading="eager"
        data-fetch="high"
        data-priority="high"
      />
      <img
        data-id="logo-carousel-8"
        src="./assets/images/brands/Logos-Web-14.png"
        alt="Cliente, Lucky 23 Restaurant at Pescadero BCS"
        loading="eager"
        data-fetch="high"
        data-priority="high"
      />
      <img
        data-id="logo-carousel-9"
        src="./assets/images/brands/Logos-Web-15.png"
        alt="Cliente, Casa Valentina Restaurant"
        loading="eager"
        data-fetch="high"
        data-priority="high"
      />
      <img
        data-id="logo-carousel-10"
        src="./assets/images/brands/Logos-Web-16.png"
        alt="Cliente, Piedro Organic Jewerly"
        loading="eager"
        data-fetch="high"
        data-priority="high"
      />
    </div>

    <!-- Main Content -->
    <main>
      <section class="hero-section hero-container">
        <div class="masonry-block">
          <!-- Half Left: Hero Content -->
          <div class="half-left">
            <div class="hero-content" style="min-height: 400px">
              <h2>
                <div class="hero_title">Crece con</div>
                <div
                  class="hero_title"
                  style="position: relative; height: 85px"
                >
                  <span class="word green">una¨web</span>
                  <span class="word purple">un¨logo¨nuevo</span>
                  <span class="word oxido">estrategia</span>
                  <span class="word azul">marketing</span>
                  <span class="word oxido">diseño</span>
                </div>
              </h2>

              <p class="hero_text">
                Descubre servicios creativos y digitales integrales en un solo
                click.
              </p>

              <div
                class="white-shadow"
                style="
                  --bg: linear-gradient(0deg, #ffffff55 1%, white 33%);
                  --blur: 10px;
                "
              >
                <div class="search-wrapper">
                  <div style="--mb: 1rem">
                    <div class="input-group" style="--w-fill: 1">
                      <label
                        for="klef-search"
                        class="input-with-icon"
                        style="--w-fill: 1"
                      >
                        <svg
                          class="input-icon input-icon-left"
                          width="20"
                          height="20"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2"
                        >
                          <circle cx="11" cy="11" r="8" />
                          <path d="m21 21-4.3-4.3" />
                        </svg>
                        <input
                          id="klef-search"
                          type="text"
                          class="input input-has-icon-left"
                          placeholder="Search: Mockups, Logos, Design..."
                          autocomplete="off"
                          style="--w-fill: 1"
                          aria-label="Buscar en el sitio"
                        />
                      </label>
                    </div>
                  </div>
                </div>

                <div id="search-tags">
                  <span
                    class="border-emerald-500"
                    role="button"
                    tabindex="0"
                    aria-label="Filtrar proyectos por Desarrollo"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke-width="1.5"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 16.5"
                      ></path>
                    </svg>
                    Desarrollo
                  </span>
                  <span
                    class="border-amber-500"
                    role="button"
                    tabindex="0"
                    aria-label="Filtrar proyectos por Diseño"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke-width="1.5"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M4.098 19.902a3.75 3.75 0 0 0 5.304 0l6.401-6.402M6.75 21A3.75 3.75 0 0 1 3 17.25V4.125C3 3.504 3.504 3 4.125 3h5.25c.621 0 1.125.504 1.125 1.125v4.072M6.75 21a3.75 3.75 0 0 0 3.75-3.75V8.197M6.75 21h13.125c.621 0 1.125-.504 1.125-1.125v-5.25c0-.621-.504-1.125-1.125-1.125h-4.072M10.5 8.197l2.88-2.88c.438-.439 1.15-.439 1.59 0l3.712 3.713c.44.44.44 1.152 0 1.59l-2.879 2.88M6.75 17.25h.008v.008H6.75v-.008Z"
                      ></path>
                    </svg>
                    Diseño
                  </span>
                  <span
                    class="border-blue-500"
                    role="button"
                    tabindex="0"
                    aria-label="Filtrar proyectos por Marketing"
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      fill="none"
                      viewBox="0 0 24 24"
                      stroke-width="1.5"
                      stroke="currentColor"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"
                      ></path>
                    </svg>
                    Marketing
                  </span>
                </div>
              </div>
            </div>
          </div>

          <!-- Half Right: Masonry Images -->
          <div class="half-right">
            <div class="images_container">
              <div class="img_container">
                <picture>
                  <source
                    srcset="
                      ./assets/images/hero/a/quick-portfolio-klef-sead-cabo.avif
                    "
                    type="image/avif"
                  />
                  <img
                    src="./assets/images/hero/c/quick-portfolio-klef-sead-cabo.webp"
                    alt="Klef Agency Portfolio - Sead Cabo Poster Mockup"
                    width="300"
                    height="300"
                    style="
                      aspect-ratio: 1/1.5;
                      width: 100%;
                      height: auto;
                      object-fit: cover;
                      border-radius: 8px;
                    "
                    loading="lazy"
                  />
                </picture>
              </div>
              <div class="img_container">
                <picture>
                  <source
                    srcset="
                      ./assets/images/hero/a/quick-portfolio-klef-00002-punta-medano.avif
                    "
                    type="image/avif"
                  />
                  <img
                    src="./assets/images/hero/c/quick-portfolio-klef-00002-punta-medano.webp"
                    alt="Klef Agency Portfolio - Punta Medano Restaurant Food Menu"
                    width="300"
                    height="300"
                    style="
                      aspect-ratio: 1/1.5;
                      width: 100%;
                      height: auto;
                      object-fit: cover;
                      border-radius: 8px;
                    "
                    loading="lazy"
                  />
                </picture>
              </div>
            </div>
            <div class="images_container">
              <div class="img_container">
                <picture>
                  <source
                    srcset="
                      ./assets/images/hero/a/quick-portfolio-klef-t1me-and-co-cabo.avif
                    "
                    type="image/avif"
                  />
                  <img
                    src="./assets/images/hero/c/quick-portfolio-klef-t1me-and-co-cabo.webp"
                    alt="Klef Agency Portfolio - T1me and Co. Branding Project"
                    width="300"
                    height="300"
                    style="
                      aspect-ratio: 1/1.5;
                      width: 100%;
                      height: auto;
                      object-fit: cover;
                      border-radius: 8px;
                    "
                    loading="eager"
                    fetchpriority="high"
                  />
                </picture>
              </div>
              <div class="img_container">
                <picture>
                  <source
                    srcset="
                      ./assets/images/hero/a/quick-portfolio-klef-00003-casa-valentina.avif
                    "
                    type="image/avif"
                  />
                  <img
                    src="./assets/images/hero/c/quick-portfolio-klef-00003-casa-valentina.webp"
                    alt="Klef Agency Portfolio - Casa Valentina Restaurant Branding Project"
                    width="300"
                    height="300"
                    style="
                      aspect-ratio: 1/1.5;
                      width: 100%;
                      height: auto;
                      object-fit: cover;
                      border-radius: 8px;
                    "
                    loading="lazy"
                  />
                </picture>
              </div>
              <div class="img_container">
                <picture>
                  <source
                    srcset="
                      ./assets/images/hero/a/quick-portfolio-klef-punta-medano-web.avif
                    "
                    type="image/avif"
                  />
                  <img
                    src="./assets/images/hero/c/quick-portfolio-klef-punta-medano-web.webp"
                    alt="Klef Agency Portfolio - Punta Medano Restaurant Website"
                    width="300"
                    height="300"
                    style="
                      aspect-ratio: 1/1.5;
                      width: 100%;
                      height: auto;
                      object-fit: cover;
                      border-radius: 8px;
                    "
                    loading="lazy"
                  />
                </picture>
              </div>
            </div>
            <div class="images_container">
              <div class="img_container">
                <picture>
                  <source
                    srcset="
                      ./assets/images/hero/a/quick-portfolio-klef-00007-fish-adn-grill.avif
                    "
                    type="image/avif"
                  />
                  <img
                    src="./assets/images/hero/c/quick-portfolio-klef-00007-fish-adn-grill.webp"
                    alt="Klef Agency Portfolio - Fish and Grill Restaurant Branding Project"
                    width="300"
                    height="300"
                    style="
                      aspect-ratio: 1/1.5;
                      width: 100%;
                      height: auto;
                      object-fit: cover;
                      border-radius: 8px;
                    "
                    loading="lazy"
                  />
                </picture>
              </div>
              <div class="img_container">
                <picture>
                  <source
                    srcset="
                      ./assets/images/hero/a/quick-portfolio-klef-00004-t1me-and-co-cabo.avif
                    "
                    type="image/avif"
                  />
                  <img
                    src="./assets/images/hero/c/quick-portfolio-klef-00004-t1me-and-co-cabo.webp"
                    alt="Klef Agency Portfolio - T1me and Co. Branding Project"
                    width="300"
                    height="300"
                    style="
                      aspect-ratio: 1/1.5;
                      width: 100%;
                      height: auto;
                      object-fit: cover;
                      border-radius: 8px;
                    "
                    loading="lazy"
                  />
                </picture>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Brands Carousel -->
      <div class="container brandsCarousel">
        <div
          class="d-flex carouselTrack"
          style="--flex: 1; margin: 10px 0px; gap: 1rem"
        >
          <!-- Set 1 -->
          <div class="brandLogo" itm="1">
            <div data-image-id="logo-carousel-1" class="skeleton"></div>
          </div>
          <div class="brandLogo" itm="2">
            <div data-image-id="logo-carousel-2" class="skeleton"></div>
          </div>
          <div class="brandLogo" itm="3">
            <div data-image-id="logo-carousel-3" class="skeleton"></div>
          </div>
          <div class="brandLogo" itm="4">
            <div data-image-id="logo-carousel-4" class="skeleton"></div>
          </div>
          <div class="brandLogo" itm="5">
            <div data-image-id="logo-carousel-5" class="skeleton"></div>
          </div>
          <div class="brandLogo" itm="6">
            <div data-image-id="logo-carousel-6" class="skeleton"></div>
          </div>
          <div class="brandLogo" itm="7">
            <div data-image-id="logo-carousel-7" class="skeleton"></div>
          </div>
          <div class="brandLogo" itm="8">
            <div data-image-id="logo-carousel-8" class="skeleton"></div>
          </div>
          <div class="brandLogo" itm="9">
            <div data-image-id="logo-carousel-9" class="skeleton"></div>
          </div>
          <div class="brandLogo" itm="10">
            <div data-image-id="logo-carousel-10" class="skeleton"></div>
          </div>
          <!-- Set 2 (Clones for infinite loop) -->
          <div class="brandLogo" itm="1">
            <div data-image-id="logo-carousel-1" class="skeleton"></div>
          </div>
          <div class="brandLogo" itm="2">
            <div data-image-id="logo-carousel-2" class="skeleton"></div>
          </div>
          <div class="brandLogo" itm="3">
            <div data-image-id="logo-carousel-3" class="skeleton"></div>
          </div>
          <div class="brandLogo" itm="4">
            <div data-image-id="logo-carousel-4" class="skeleton"></div>
          </div>
          <div class="brandLogo" itm="5">
            <div data-image-id="logo-carousel-5" class="skeleton"></div>
          </div>
          <div class="brandLogo" itm="6">
            <div data-image-id="logo-carousel-6" class="skeleton"></div>
          </div>
          <div class="brandLogo" itm="7">
            <div data-image-id="logo-carousel-7" class="skeleton"></div>
          </div>
          <div class="brandLogo" itm="8">
            <div data-image-id="logo-carousel-8" class="skeleton"></div>
          </div>
          <div class="brandLogo" itm="9">
            <div data-image-id="logo-carousel-9" class="skeleton"></div>
          </div>
          <div class="brandLogo" itm="10">
            <div data-image-id="logo-carousel-10" class="skeleton"></div>
          </div>
        </div>
      </div>
      <!-- Value Proposition Section -->
      <section
        class="value-prop-section"
        style="margin: 0 auto; padding: 0 20px; --mt: 4rem"
      >
        <div class="value-prop-statement-2">
          <!-- Main Container -->
          <div class="container">
            <div class="card-wrap">
              <div class="glass-card">
                <div class="content">
                  <div class="content-text">
                    <h1 class="title">Laboratorio Creativo</h1>
                    <p class="subtitle">
                      Donde estrategia, identidad y tecnología convierten marcas
                      en negocios funcionales y escalables.
                    </p>
                    <p class="description">
                      Utilizamos Design Thinking y la consultoría de negocios
                      como motor estratégico.
                    </p>
                    <a href="#process" class="cta-button">Conocer más</a>
                  </div>
                  <div class="content-image">
                    <img
                      src="./assets/images/portfolio/logos/klef-labs-logo.jpg"
                      width="400"
                      height="400"
                      alt="Logo"
                      loading="lazy"
                    />
                  </div>
                </div>
              </div>
              <div class="card-shadow"></div>
            </div>
          </div>
        </div>
      </section>
      <!-- Process Section -->
      <section id="process" class="k-process">
        <div class="k-process-title">
          <h2 class="k-section-title">Nuestro proceso</h2>
          <p class="k-section-subtitle">
            Obtén lo que necesitas en 3 sencillos pasos:
          </p>
        </div>

        <div class="k-steps">
          <div class="k-step">
            <div class="k-step-head">
              <div class="k-step-num">1</div>
              <div class="k-step-line"><i></i></div>
            </div>
            <div class="k-step-body">
              <span class="k-step-title">Diagnóstico</span>
              <p class="k-step-text">
                No adivinamos. Estudiamos tu negocio para detectar oportunidades
                de crecimiento.
              </p>
            </div>
          </div>

          <div class="k-step">
            <div class="k-step-head">
              <div class="k-step-num">2</div>
              <div class="k-step-line"><i></i></div>
            </div>
            <div class="k-step-body">
              <span class="k-step-title">Estrategia y Comunicación</span>
              <p class="k-step-text">
                Diseñamos el plan de acción, construimos la narrativa y visuales
                que te guiarán a tu objetivo.
              </p>
            </div>
          </div>

          <div class="k-step">
            <div class="k-step-head">
              <div class="k-step-num">3</div>
              <div class="k-step-line"><i></i></div>
            </div>
            <div class="k-step-body">
              <span class="k-step-title">Implementación</span>
              <p class="k-step-text">
                Arquitectamos: marca + mensaje + herramientas, ejecutamos y
                medimos resultados.
              </p>
            </div>
          </div>
        </div>
      </section>
      <!-- Portfolio section -->
      <section id="portfolio-section" class="container">
        <div style="text-align: center">
          <h2 class="k-section-title">Portafolio</h2>
          <p class="k-section-subtitle">
            Descubre nuestros proyectos más destacados:
          </p>
        </div>
        <div class="tab-menu-container">
          <input type="checkbox" style="display: none" id="is-searching" />

          <div class="tab-menu-wrapper" data-behavior="re-index-z">
            <label for="tab-search__bar" class="search-wrapper">
              <input
                id="tab-search__bar"
                type="text"
                class="search-input-portfolio"
                placeholder="Buscar proyectos..."
                aria-label="Buscar"
              />
              <div class="search-icon-portfolio">
                <svg
                  viewBox="0 0 24 24"
                  width="20"
                  height="20"
                  stroke="currentColor"
                  fill="none"
                  stroke-width="2"
                >
                  <circle cx="11" cy="11" r="8"></circle>
                  <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
              </div>
            </label>

            <div class="tabs-scroll-container" id="tabsContainer">
              <ul class="tabs-list" id="tabsList"></ul>
            </div>

            <button
              class="menu-toggle-btn"
              id="menuToggle"
              aria-label="Abrir menú"
            >
              <svg
                id="menuIcon"
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <line x1="3" y1="12" x2="21" y2="12"></line>
                <line x1="3" y1="6" x2="21" y2="6"></line>
                <line x1="3" y1="18" x2="21" y2="18"></line>
              </svg>
              <svg
                id="closeIcon"
                style="display: none"
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
            </button>
          </div>

          <div class="desktop-sub-chips" id="desktopSubChips"></div>
        </div>

        <div class="mobile-thumb-dock" id="mobileSubDock"></div>

        <div class="card-grid" id="cardGrid"></div>
        <span id="results-count">12 Proyectos</span>
        <div style="display: flex; justify-content: center">
          <button
            class="btn btn-primary island-btn accent"
            style="margin: 0 auto"
          >
            Ver todos los proyectos
          </button>
        </div>
      </section>
      <!-- Services Loop -->
      <section id="services">
        <div id="services-scroll"></div>
      </section>

      <!--END MAIN SECTIONS -->
    </main>

    <script>
      // ==========================================
      // MONOLITHIC JS START
      // ==========================================

      // RE-INDEX-Z BEHAVIOR
      // Cambia z-index de .mobile-topbar a 1 cuando [data-behavior="re-index-z"] entra en viewport
      (function () {
        const mobileTopbar = document.querySelector(".mobile-topbar");
        if (!mobileTopbar) return;

        const reIndexTargets = document.querySelectorAll(
          '[data-behavior="re-index-z"]',
        );
        if (reIndexTargets.length === 0) return;

        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                mobileTopbar.classList.add("re-index-z-active");
              } else {
                mobileTopbar.classList.remove("re-index-z-active");
              }
            });
          },
          { threshold: 0.1 },
        );

        reIndexTargets.forEach((target) => observer.observe(target));
      })();

      // SEO IMAGE HYDRATOR CLASS
      class SEOImageHydrator {
        constructor() {
          this.imageRegistry = new Map();
          this.hydrated = new Set();
          this.loading = new Set();
          this.errors = new Set();
          this.init();
        }

        init() {
          this.indexSEOImages();
          this.hydrateAllTargets();
        }

        indexSEOImages() {
          const seoBlock = document.getElementById("seo-images");
          if (!seoBlock) return;
          const images = seoBlock.querySelectorAll("img[data-id]");
          images.forEach((img) => {
            const id = img.dataset.id;
            this.imageRegistry.set(id, {
              src: img.src,
              alt: img.alt,
              fetch: img.dataset.fetch || "low",
            });
          });
        }

        hydrateAllTargets() {
          const targets = document.querySelectorAll("[data-image-id]");
          const fetchGroups = { high: [], medium: [], low: [] };

          targets.forEach((target) => {
            const imageId = target.dataset.imageId;
            const imageData = this.imageRegistry.get(imageId);
            if (!imageData) return;
            const fetch = imageData.fetch;
            if (fetchGroups[fetch])
              fetchGroups[fetch].push({ target, imageId, imageData });
          });

          // High priority images load immediately
          fetchGroups.high.forEach(({ target, imageId, imageData }) => {
            this.hydrateTarget(target, imageId, imageData);
          });
          this.hydrateByPriority(fetchGroups.medium, 200);
          this.hydrateByPriority(fetchGroups.low, 400);
        }

        hydrateByPriority(group, delay) {
          setTimeout(() => {
            group.forEach(({ target, imageId, imageData }) => {
              this.hydrateTarget(target, imageId, imageData);
            });
          }, delay);
        }

        hydrateTarget(target, imageId, imageData) {
          const uniqueKey = `${imageId}-${target.dataset.targetIndex || Math.random()}`;
          if (this.hydrated.has(uniqueKey)) return;
          if (target.querySelector("img")) {
            this.hydrated.add(uniqueKey);
            target.classList.remove("skeleton");
            target.classList.add("loaded");
            return;
          }

          this.loading.add(uniqueKey);
          const img = document.createElement("img");
          img.src = imageData.src;
          img.alt = imageData.alt;
          // Retain original styling if generic or apply specific
          img.style.cssText = "width: 100%; height: 100%; object-fit: cover;"; // Matching layout
          if (target.parentElement.classList.contains("brandLogo")) {
            img.style.cssText =
              "max-width: 80%; max-height: 80%; object-fit: contain;";
          }

          if (imageData.fetch === "high") img.fetchpriority = "high";

          img.onload = () => {
            target.appendChild(img);
            target.classList.remove("skeleton");
            target.classList.add("loaded");
            this.loading.delete(uniqueKey);
            this.hydrated.add(uniqueKey);
          };

          img.onerror = () => {
            target.classList.remove("skeleton");
            target.classList.add("error");
            this.loading.delete(uniqueKey);
            this.errors.add(uniqueKey);
          };
        }
      }

      // HERO ANIMATION LOGIC
      (function () {
        "use strict";
        function initHeroAnimation() {
          const words = document.getElementsByClassName("word");
          if (words.length === 0) return;

          const wordArray = [];
          let currentWord = 0;

          words[currentWord].style.opacity = 1;

          for (let i = 0; i < words.length; i++) {
            splitLetters(words[i]);
          }

          function changeWord() {
            const cw = wordArray[currentWord];
            const nw =
              currentWord == words.length - 1
                ? wordArray[0]
                : wordArray[currentWord + 1];

            for (let i = 0; i < cw.length; i++) {
              animateLetterOut(cw, i);
            }

            for (let i = 0; i < nw.length; i++) {
              nw[i].className = "letter behind";
              nw[0].parentElement.style.opacity = 1;
              animateLetterIn(nw, i);
            }

            currentWord = currentWord == words.length - 1 ? 0 : currentWord + 1;
          }

          function animateLetterOut(cw, i) {
            setTimeout(function () {
              cw[i].className = "letter out";
            }, i * 80);
          }

          function animateLetterIn(nw, i) {
            setTimeout(
              function () {
                nw[i].className = "letter in";
              },
              340 + i * 80,
            );
          }

          function splitLetters(word) {
            const content = word.innerHTML;
            word.innerHTML = "";
            const letters = [];

            for (let i = 0; i < content.length; i++) {
              const letter = document.createElement("span");
              letter.className = "letter";
              if (content.charAt(i) === "¨") {
                letter.innerHTML = "&nbsp;";
                letter.style.opacity = "0";
              } else {
                letter.innerHTML = content.charAt(i);
              }
              word.appendChild(letter);
              letters.push(letter);
            }
            wordArray.push(letters);
          }

          changeWord();
          setInterval(changeWord, 4000);
        }

        // Initialize everything
        if (document.readyState === "loading") {
          document.addEventListener("DOMContentLoaded", () => {
            window.seoImageHydrator = new SEOImageHydrator();
            initHeroAnimation();
          });
        } else {
          window.seoImageHydrator = new SEOImageHydrator();
          initHeroAnimation();
        }
      })();
    </script>

    <!-- Specific Symbols for Mega Menu (if not in main sprite) -->
    <svg style="display: none">
      <symbol
        id="icon-page"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
      >
        <path
          d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
        <polyline
          points="14 2 14 8 20 8"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        />
      </symbol>
      <!-- Add other symbols as needed -->
    </svg>

    <script src="./shared/components/search/search-system.js" defer></script>

    <!-- Dynamic Island lazy load on scroll with shared cookie utilities -->

    <!-- Dynamic Island lazy load on scroll with shared cookie utilities -->
    <script>
      (function () {
        // Load shared cookie utilities
        const cookiesScript = document.createElement("script");
        cookiesScript.src = "./shared/utilities/cookies/cookies.js";
        document.head.appendChild(cookiesScript);

        const consentScript = document.createElement("script");
        consentScript.src = "./shared/utilities/cookies/cookie-consent.js";
        document.head.appendChild(consentScript);

        let dynamicIslandLoaded = false;
        let scrollListenerAdded = false;

        function loadDynamicIslandResources() {
          if (dynamicIslandLoaded) return;
          dynamicIslandLoaded = true;

          // Load CSS
          const cssLink = document.createElement("link");
          cssLink.rel = "stylesheet";
          cssLink.href =
            "./shared/components/dynamic-island/dynamic-island.css";
          document.head.appendChild(cssLink);

          // Load JS
          const jsScript = document.createElement("script");
          jsScript.src = "./shared/components/dynamic-island/dynamic-island.js";
          document.head.appendChild(jsScript);

          jsScript.onload = function () {
            // Initialize dynamic island after load
            if (typeof loadPreset === "function") {
              loadPreset("search_totop");
            }

            if (typeof initCookieConsentUI === "function") {
              initCookieConsentUI();
            }
          };
        }

        function checkAndRequestCookies() {
          const consent = getCookieConsent();
          loadScriptsForConsentedCategories(consent);
          loadDynamicIslandResources();
        }

        function onScroll() {
          if (window.scrollY > 200 && !scrollListenerAdded) {
            scrollListenerAdded = true;
            window.removeEventListener("scroll", onScroll);
            checkAndRequestCookies();
          }
        }

        window.addEventListener("scroll", onScroll);
      })();
    </script>

    <footer
      style="
        background: var(--k-dark);
        color: #fff;
        --py: 4rem;
        --px: 2rem;
        padding: var(--py) var(--px) 8rem;
      "
    >
      <div
        style="
          max-width: var(--k-max);
          margin: 0 auto;
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          --gap: 3rem;
          gap: var(--gap);
        "
      >
        <div class="footer-col" data-column="1">
          <div
            style="
              font-weight: 700;
              font-size: 1.5rem;
              --mb: 1.5rem;

              display: flex;
              align-items: center;
              --gap: 0.5rem;
              gap: var(--gap);
            "
          >
            <img
              src="./assets/images/favicons/klef-logo.png"
              alt="Klef Logo"
              width="30"
              height="30"
            />
            Klef Agency
          </div>
          <p style="color: var(--k-light-gray); line-height: 1.6; margin: 0">
            Laboratorio creativo. Estrategia que respira. Innovación que se
            siente.
          </p>
        </div>

        <div class="footer-col" data-column="2">
          <h4 style="font-weight: 600; --mb: 1rem; margin-bottom: var(--mb)">
            Compañía
          </h4>
          <ul
            style="
              list-style: none;
              padding: 0;
              margin: 0;
              color: var(--k-light-gray);
              display: flex;
              flex-direction: column;
              --gap: 0.5rem;
              gap: var(--gap);
            "
          >
            <li>
              <a href="#" style="color: inherit; text-decoration: none">Blog</a>
            </li>
            <li>
              <a href="#" style="color: inherit; text-decoration: none"
                >Contacto</a
              >
            </li>
            <li>
              <a href="#" style="color: inherit; text-decoration: none"
                >Portafolio</a
              >
              <span
                style="
                  background: var(--k-blue);
                  font-size: 0.7rem;
                  --p: 2px 6px;
                  padding: var(--p);
                  border-radius: 4px;
                  --ml: 5px;
                  margin-left: var(--ml);
                  --c: #fff;
                "
              >
                Nuevos
              </span>
            </li>
          </ul>
        </div>
        <div class="footer-col" data-column="3">
          <h4 style="font-weight: 600; --mb: 1rem; margin-bottom: var(--mb)">
            Explora
          </h4>
          <ul
            style="
              list-style: none;
              padding: 0;
              margin: 0;
              color: var(--k-light-gray);
              display: flex;
              flex-direction: column;
              --gap: 0.5rem;
              gap: var(--gap);
            "
          >
            <li>
              <style>
                .discipline-indicator {
                  background: var(--c1);
                  font-size: 0.7rem;
                  border-radius: 4px;
                  margin: 0px 5px 2.5px 0px;
                  --c: #fff;
                  --wh: 15px;
                  width: var(--wh);
                  height: var(--wh);
                  display: inline-block;
                }

                .menu-diciplines {
                  color: inherit;
                  text-decoration: none;
                  display: flex;
                  align-items: center;
                }
              </style>
              <a href="#" class="menu-diciplines">
                <span class="discipline-indicator" style="--c1: var(--brands)">
                </span>
                Brands
              </a>
            </li>
            <li>
              <a
                href="#"
                class="menu-diciplines"
                style="color: inherit; text-decoration: none"
              >
                <span class="discipline-indicator" style="--c1: var(--dev)">
                </span>
                Devs
              </a>
            </li>
            <li>
              <a
                href="#"
                class="menu-diciplines"
                style="color: inherit; text-decoration: none"
              >
                <span class="discipline-indicator" style="--c1: var(--studio)">
                </span>
                Studio
              </a>
            </li>
            <li>
              <a
                href="#"
                class="menu-diciplines"
                style="color: inherit; text-decoration: none"
              >
                <span
                  class="discipline-indicator"
                  style="--c1: var(--strategy)"
                ></span>
                Strategy
              </a>
            </li>
          </ul>
        </div>
        <div class="footer-col" data-column="4">
          <h4 style="font-weight: 600; --mb: 1rem; margin-bottom: var(--mb)">
            Síguenos
          </h4>
          <ul
            style="
              list-style: none;
              padding: 0;
              margin: 0;
              color: var(--k-light-gray);
              display: flex;
              flex-direction: column;
              --gap: 0.75rem;
              gap: var(--gap);
            "
          >
            <li>
              <a
                href="https://www.instagram.com/klef.agency/"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Síguenos en Instagram"
                style="
                  color: inherit;
                  text-decoration: none;
                  display: flex;
                  align-items: center;
                  gap: 8px;
                "
              >
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"
                  />
                </svg>
                Instagram
              </a>
            </li>
            <li>
              <a
                href="https://www.facebook.com/klef.agency/"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Síguenos en Facebook"
                style="
                  color: inherit;
                  text-decoration: none;
                  display: flex;
                  align-items: center;
                  gap: 8px;
                "
              >
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"
                  />
                </svg>
                Facebook
              </a>
            </li>
            <li>
              <a
                href="https://www.youtube.com/channel/UCYFT6kwbsDzbiK6OjuKWM5w"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Síguenos en YouTube"
                style="
                  color: inherit;
                  text-decoration: none;
                  display: flex;
                  align-items: center;
                  gap: 8px;
                "
              >
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"
                  />
                </svg>
                YouTube
              </a>
            </li>
            <li>
              <a
                href="https://wa.me/526245161037"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Contactarnos por WhatsApp"
                style="
                  color: inherit;
                  text-decoration: none;
                  display: flex;
                  align-items: center;
                  gap: 8px;
                "
              >
                <svg
                  width="20"
                  height="20"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"
                  />
                </svg>
                WhatsApp
              </a>
            </li>
          </ul>
        </div>
        <div class="footer-col" data-column="5">
          <h4
            style="
              font-weight: 600;
              --mb: 0.75rem;
              margin-top: 2rem;
              margin-bottom: var(--mb);
            "
          >
            Contacto
          </h4>
          <ul
            style="
              list-style: none;
              padding: 0;
              margin: 0;
              color: var(--k-light-gray);
              display: flex;
              flex-direction: column;
              --gap: 0.5rem;
              gap: var(--gap);
            "
          >
            <li>
              <a
                href="mailto:info@klef.agency"
                style="color: inherit; text-decoration: none"
              >
                info@klef.agency
              </a>
            </li>
            <li style="--mt: 1rem">
              <a
                href="tel:+526245161037"
                target="_blank"
                rel="noopener noreferrer"
                style="color: inherit; text-decoration: none"
              >
                Atencion al cliente:
                <div style="--mt: 0.5rem"></div>
                +52 (624) 516 1037
              </a>
            </li>

            <li style="--mt: 1rem">
              <a
                href="tel:+526241682048"
                target="_blank"
                rel="noopener noreferrer"
                style="color: inherit; text-decoration: none"
              >
                Soporte técnico:
                <div style="--mt: 0.5rem"></div>
                +52 (624) 168 2048
              </a>
            </li>
          </ul>
        </div>
        <!-- div>
          <h4 style="font-weight: 600; --mb: 1rem; margin-bottom: var(--mb)">
            Newsletter
          </h4>
          <p
            style="
              color: var(--k-light-gray);
              --mb: 1rem;
              margin-bottom: var(--mb);
              font-size: 0.9rem;
            "
          >
            Recibe insights de negocio y estrategias para escalar.
          </p>
          <form style="display: flex; --gap: 0.5rem; gap: var(--gap)">
            <input
              type="email"
              placeholder="Email"
              style="
                background: #333;
                border: none;
                --p: 0.5rem;
                padding: var(--p);
                border-radius: var(--k-radius);
                color: white;
                --w-fill: 1;
                flex: var(--w-fill);
              "
            />
            <button
              style="
                background: var(--k-blue);
                color: white;
                border: none;
                --p: 0.5rem 1rem;
                padding: var(--p);
                border-radius: var(--k-radius);
                cursor: pointer;
              "
            >
              Go
            </button>
          </form>
        </div><!---->
      </div>
      <div
        style="
          max-width: var(--k-max);
          --mt: 4rem;
          margin: var(--mt) auto 0;
          --pt: 2rem;
          padding-top: var(--pt);
          border-top: 1px solid #333;
          text-align: center;
          color: var(--k-light-gray);
          font-size: 0.9rem;
        "
      >
        © 2026 Klef. Todos los derechos reservados. | Hecho con tecnología Klef
        100% nativa.
      </div>
    </footer>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const servicesSection = document.getElementById("services");
        if (servicesSection) {
          const observer = new IntersectionObserver(
            (entries) => {
              entries.forEach((entry) => {
                if (entry.isIntersecting) {
                  const script = document.createElement("script");
                  script.src =
                    "./shared/components/services/services-ticker.js";
                  document.head.appendChild(script);
                  observer.disconnect();
                }
              });
            },
            {
              rootMargin: "100px", // Load when 200px before entering viewport
            },
          );
          observer.observe(servicesSection);
        }
      });
    </script>
    <script>
      // ============================================================================
      // SEARCH INPUT CAPTURE SYSTEM WITH SHIMMER & DELAYED OVERLAY
      // ============================================================================

      const searchElements = {
        main_search: "#searchOverlay .search-input",
        klef_search: "#klef-search",
      };

      function getSearchInputElement(name) {
        const selector = searchElements[name];
        if (!selector) {
          console.error(`No selector found for: ${name}`);
          return null;
        }

        const element = document.querySelector(selector);
        if (!element) {
          console.error(`Element not found for selector: ${selector}`);
          return null;
        }

        return element;
      }

      class SearchInputCapture {
        constructor() {
          this.element = null;
          this.currentValue = "";
          this.history = [];
          this.typingTimer = null;
          this.typingDelay = 800; // ms después de dejar de escribir
          this.overlayDelay = 1000; // ms antes de abrir overlay
        }

        attach(elementId) {
          this.element = document.getElementById(elementId);

          if (!this.element) {
            console.error(`Element with id "${elementId}" not found`);
            return;
          }

          this.element.addEventListener("input", (e) => {
            this.currentValue = e.target.value;
            this.history.push({
              value: this.currentValue,
              timestamp: new Date(),
              source: "user",
            });

            // Cancelar timer anterior
            clearTimeout(this.typingTimer);

            // Remover shimmer si existe
            this.removeShimmer();

            // Si hay valor, esperar a que termine de escribir
            if (this.currentValue.trim()) {
              this.typingTimer = setTimeout(() => {
                this.onTypingComplete();
              }, this.typingDelay);
            }
          });
        }

        onTypingComplete() {
          console.log("Usuario terminó de escribir:", this.currentValue);

          // 1. Agregar shimmer al input
          this.addShimmer();

          // 2. Transferir valor a main_search
          const mainSearchInput = getSearchInputElement("main_search");
          if (mainSearchInput) {
            mainSearchInput.value = this.currentValue;
          }

          // 3. Después de 1s, abrir overlay y buscar
          setTimeout(() => {
            this.openOverlayAndSearch();
          }, this.overlayDelay);
        }

        addShimmer() {
          this.element.classList.add("shimmer-active");
        }

        removeShimmer() {
          this.element.classList.remove("shimmer-active");
        }

        openOverlayAndSearch() {
          // Remover shimmer
          this.removeShimmer();

          // Verificar que el sistema de búsqueda esté disponible
          if (
            typeof window.openSearch !== "function" ||
            typeof window.searchFor !== "function"
          ) {
            console.error("Search system not loaded");
            return;
          }

          // 1. Abrir overlay
          window.openSearch();

          // 2. Esperar a que el overlay se abra completamente y ejecutar búsqueda
          setTimeout(() => {
            if (this.currentValue.trim()) {
              window.searchFor(this.currentValue);
            }
          }, 100); // Pequeño delay para asegurar que el overlay esté abierto
        }

        getValue() {
          return this.currentValue;
        }

        getHistory() {
          return this.history;
        }
      }

      // Uso
      const searchInput = new SearchInputCapture();

      document.addEventListener("DOMContentLoaded", () => {
        searchInput.attach("klef-search");
      });
    </script>
    <script>
      // Una app que permite a los usuarios reservar y pagar por sus comidas favoritas. Desarrollada por Klef Dev y Klef Brands.
      // http://klef.agency/wp-content/uploads/2025/04/Hello-Dish.jpg
      // https://www.facebook.com/photo/?fbid=2893474724084314&set=a.102372313194583
      // uiux
      const categories = [
        { id: 0, label: "Todo", filter: "all", subs: [] },
        {
          id: 1,
          label: "Diseño",
          filter: "brands",
          subs: [],
        },
        {
          id: 2,
          label: "Webs",
          filter: "dev",
          subs: [],
        },
        {
          id: 3,
          label: "Studio",
          filter: "studio",
          subs: [],
        },
        {
          id: 4,
          label: "Marketing",
          filter: "strategy",
          subs: [],
        },
      ];

      const portfolioData = [
        {
          id: "001",
          slug: "hello-dish",
          discipline: "brands",
          category: ["manual-de-marca", "branding"],
          content_type: "Portfolio",
          title: ["Hello Dish", "Identidad"],
          client_name: "Hello Dish",
          client_industry: "Restaurantes",
          extract:
            "La convergencia entre lo análogo y lo digital nos da lugar a Hello Dish. Un reto de marca que nos llevó a crear un manual de marca y una identidad visual que reflejara la cultura de la marca.",
          cover_image:
            "./assets/images/portfolio/hello-dish-portfolio-card.jpg",
          logo: "./assets/images/portfolio/logos/hello-dish-logo.jpg",
        },
        {
          id: "002",
          discipline: "brands",
          category: ["manual-de-marca", "branding"],
          title: ["Klef", "Identidad"],
          client_name: "Klef",
          client_industry: "Agencia de Marketing Digital",
          extract:
            "Mostramos el proceso de desarrollo del alma de nuestra marca. Klef no es solo una agencia, es una familia.",
          cover_image: "./assets/images/portfolio/klef-brand-cover-3.jpg",
          logo: "./assets/images/portfolio/logos/cropped-klef-logo.jpg?v0",
        },
        {
          id: "003",
          discipline: "brands",
          category: ["manual-de-marca", "branding"],
          title: ["Casa Valentina", "Iden..."],
          client_name: "Casa Valentina",
          client_industry: "Restaurante",
          extract:
            "La evolución de la identidad visual de Casa Valentina, es una historia que nos muestra como el mercado debe ser la brujula de la marca.",
          cover_image: "./assets/images/portfolio/casa-valentina-cover.jpg",
          logo: "./assets/images/portfolio/logos/casa-valentina-logo.jpg",
        },
        {
          id: "004",
          discipline: "dev",
          category: ["pagina-web", "diseño-y-desarrollo"],
          title: ["JB Pools", "Website"],
          client_name: "JB Pools",
          client_industry: "Piscinas, Construcción",
          extract:
            "La web de JB Pools es un ejemplo del equilibrio entre diseño y funcionalidad...",
          cover_image: "./assets/images/portfolio/jbpools-web-design-cover.jpg",
          logo: "./assets/images/portfolio/logos/jbpools-logo.jpg",
        },
        {
          id: "005",
          discipline: "studio",
          category: ["sesion-de-video", "multimedia"],
          title: ["Cumbre del Tezal", "V.."],
          client_name: "Cumbre del Tezal",
          client_industry: "Bienes raíces",
          extract:
            "Este proyecto de storytelling nos conecta con el estilo de vida de Cumbre del Tezal, cada frame cuenta una historia.",
          cover_image:
            "./assets/images/portfolio/cumbre-del-tezal-content-cover.jpg",
          logo: "./assets/images/portfolio/logos/cumbre-del-tezal-logo.jpg",
        },
        {
          id: "006",
          discipline: "strategy",
          category: ["proceso-ventas", "operacion"],
          title: ["Caso de estudio", "Ventas"],
          client_name: "Tour Company",
          client_industry: "Turismo",
          extract:
            "Este proyecto de storytelling nos conecta con el estilo de vida de Cumbre del Tezal, cada frame cuenta una historia.",
          cover_image:
            "./assets/images/portfolio/tour-brand-strategy-cover.jpg",
          logo: "./assets/images/portfolio/logos/klef-strategy-symbol.jpg",
        },
      ];

      const disciplineLabels = {
        brands: "Klef Brands",
        dev: "Klef Dev",
        studio: "Klef Studio",
        strategy: "Klef Strategy",
      };

      const subMapping = {
        "Identidad visual": "Identidad Visual",
        Logo: "Logo",
        "Brand Kit": "Brand Kit",
        Desarrollo: "Desarrollo Web",
        Diseño: "Diseño UI/UX",
        App: "App",
        Foto: "Fotografía",
        Video: "Video",
        Planning: "Planning",
        Estrategia: "Marketing Digital",
        "Social Media": "Social Media",
        Ads: "Ads",
        Estudios: "Consultoría",
      };

      const tabsList = document.getElementById("tabsList");
      const desktopSubChips = document.getElementById("desktopSubChips");
      const mobileSubDock = document.getElementById("mobileSubDock");
      const searchInputPortfolio = document.getElementById("tab-search__bar");
      const searchingCheckbox = document.getElementById("is-searching");
      const cardGrid = document.getElementById("cardGrid");
      const resultsCount = document.getElementById("results-count");

      let activeId = 0;
      let currentSub = "";
      let searchTerm = "";

      function createCardTemplate(card) {
        return `
        <article class="card dark" data-id="${card.id}" data-discipline="${card.discipline}">
          <span class="category-tag tag-${card.discipline}">${disciplineLabels[card.discipline]}</span>
          <img src="${card.cover_image}" alt="${card.title[0]}">
          <section>
            <div class="project-header">
              <div class="project-logo">
                <img src="${card.logo || card.cover_image}" alt="${card.title[0]}">
              </div>
              <div class="project-title">
                <h2>
                  ${card.title[0]} <small>| ${card.title[1]}</small>
                </h2>
                <span>${card.category.join(", ")}</span>
              </div>
            </div>
            <p><br>
              ${card.extract}
            </p>
            <div class="project-actions">
              <div class="tag-portfolio" role="button" tabindex="0" aria-label="Leer historia de ${card.title[0]}">
                <i class="fa-solid fa-user"></i> Leer historia
              </div>
              <button class="see-more" data-component="portfolioDetail" data-id="${card.id}" aria-label="Ver detalles de ${card.title[0]}">Más</button>
            </div>
          </section>
        </article>
      `;
      }

      function renderCards(cards) {
        cardGrid.innerHTML = cards
          .map((card) => createCardTemplate(card))
          .join("");
        resultsCount.textContent = `${cards.length} Proyecto${cards.length !== 1 ? "s" : ""}`;
      }

      function applyFilters() {
        let filtered = portfolioData;

        const currentFilter = categories[activeId].filter;

        if (currentFilter !== "all") {
          filtered = filtered.filter(
            (card) => card.discipline === currentFilter,
          );
        }

        if (currentSub) {
          const mapped = subMapping[currentSub];
          if (mapped) {
            filtered = filtered.filter((card) =>
              card.category.some((c) =>
                c.toLowerCase().includes(mapped.toLowerCase()),
              ),
            );
          }
        }

        if (searchTerm) {
          filtered = filtered.filter(
            (card) =>
              card.title.some((t) =>
                t.toLowerCase().includes(searchTerm.toLowerCase()),
              ) ||
              card.category.some((c) =>
                c.toLowerCase().includes(searchTerm.toLowerCase()),
              ) ||
              card.client_name.toLowerCase().includes(searchTerm.toLowerCase()),
          );
        }

        renderCards(filtered);
      }

      function renderTabs() {
        tabsList.innerHTML = categories
          .map(
            (cat) => `
        <li data-name="${cat.label}">
          <button class="tab-button ${cat.id === activeId ? "active" : ""}" data-id="${cat.id}" aria-label="Filtrar por ${cat.label}" aria-pressed="${cat.id === activeId}">
            ${cat.label}
            ${cat.subs.length > 0 ? '<span class="has-sub-indicator"></span>' : ""}
          </button>
        </li>
      `,
          )
          .join("");
      }

      function updateSubMenus() {
        const category = categories.find((c) => c.id === activeId);

        // Limpiamos ambos contenedores primero
        desktopSubChips.innerHTML = "";
        mobileSubDock.innerHTML = "";
        desktopSubChips.classList.remove("active");
        mobileSubDock.classList.remove("active");

        if (!category || category.subs.length === 0) return;

        const isMobile = window.innerWidth <= 768;

        const chipsHTML = category.subs
          .map(
            (sub) => `
        <div class="${isMobile ? "sub-chip-mobile" : "sub-chip"}" onclick="selectSub(this)" role="button" tabindex="0" aria-label="Filtrar por ${sub}">
            ${sub}
        </div>
    `,
          )
          .join("");

        if (isMobile) {
          mobileSubDock.innerHTML = chipsHTML;
          mobileSubDock.classList.add("active");
        } else {
          desktopSubChips.innerHTML = chipsHTML;
          desktopSubChips.classList.add("active");

          // Calcular la posición del submenú en función del índice del botón activo
          const activeIndex = categories.findIndex((c) => c.id === activeId);
          const buttonWidth = 120; // Ancho aproximado de cada botón
          const offset = activeIndex * buttonWidth;

          // Asegurar que el submenú no se salga del viewport
          const viewportWidth = window.innerWidth;
          const subMenuWidth = desktopSubChips.offsetWidth;
          const maxOffset = viewportWidth - subMenuWidth - 20; // Margen de 20px

          const leftPosition = Math.min(offset, maxOffset);

          desktopSubChips.style.left = `${leftPosition}px`;
          desktopSubChips.style.transform = "translateY(10px)";
        }
      }

      window.selectSub = (el) => {
        const selector = el.classList.contains("sub-chip-mobile")
          ? ".sub-chip-mobile"
          : ".sub-chip";
        document
          .querySelectorAll(selector)
          .forEach((c) => c.classList.remove("active"));
        el.classList.add("active");
      };

      tabsList.addEventListener("click", (e) => {
        const btn = e.target.closest(".tab-button");
        if (!btn) return;

        activeId = parseInt(btn.getAttribute("data-id"));
        renderTabs(); // Tu función que pinta los botones de arriba
        updateSubMenus();
        applyFilters();

        // Scroll automático para centrar el botón activo en móvil
        if (window.innerWidth <= 768) {
          // Usar setTimeout para esperar a que el DOM se actualice
          setTimeout(() => {
            const container = document.getElementById("tabsContainer");
            const activeButton = container.querySelector(".tab-button.active");

            if (!activeButton) return;

            const containerWidth = container.offsetWidth;
            const buttonWidth = activeButton.offsetWidth;
            const buttonOffset = activeButton.offsetLeft;

            // Calcular la posición de scroll para centrar el botón
            const scrollPosition =
              buttonOffset - containerWidth / 2 + buttonWidth / 2;

            // Asegurar que el scroll no exceda los límites del contenedor
            const maxScroll = container.scrollWidth - containerWidth;
            const finalScroll = Math.min(
              Math.max(0, scrollPosition),
              maxScroll,
            );

            // Aplicar el scroll
            container.scrollTo({
              left: finalScroll,
              behavior: "smooth",
            });
          }, 0);
        }
        /*END*/
      });

      // Cerrar el menú si se hace clic en una pestaña (opcional pero recomendado)
      tabsList.addEventListener("click", (e) => {
        const container = document.getElementById("tabsContainer");
        if (
          e.target.closest(".tab-button") &&
          container.classList.contains("expanded")
        ) {
          container.classList.remove("expanded");
          menuIcon.style.display = "block";
          closeIcon.style.display = "none";
        }
      });

      searchInputPortfolio.addEventListener("focus", () => {
        searchingCheckbox.checked = true;
        desktopSubChips.classList.remove("active");
        mobileSubDock.classList.remove("active");
      });

      searchInputPortfolio.addEventListener("blur", () => {
        if (searchInputPortfolio.value.trim() === "") {
          searchingCheckbox.checked = false;
          updateSubMenus();
        }
      });

      searchInputPortfolio.addEventListener("input", (e) => {
        searchTerm = e.target.value;
        applyFilters();
      });

      const menuToggle = document.getElementById("menuToggle");
      const menuIcon = document.getElementById("menuIcon");
      const closeIcon = document.getElementById("closeIcon");
      const tabsContainer = document.getElementById("tabsContainer");

      menuToggle.addEventListener("click", () => {
        const isExpanded = tabsContainer.classList.toggle("expanded");

        if (isExpanded) {
          menuIcon.style.display = "none";
          closeIcon.style.display = "block";
        } else {
          menuIcon.style.display = "block";
          closeIcon.style.display = "none";
        }
      });

      let resizeTimer;
      window.addEventListener("resize", () => {
        clearTimeout(resizeTimer);
        resizeTimer = setTimeout(() => {
          updateSubMenus();
        }, 100);
      });

      renderTabs();
      applyFilters();
    </script>

    <!-- Adaptive Sheet - Portfolio Layout -->
    <div id="backdrop"></div>
    <div id="bottomsheet">
      <!-- Drag Handle (Mobile Only) -->
      <div class="drag-handle"></div>
      <!-- Top Controls (Header) -->
      <div class="sheet-top-controls">
        <div class="top-controls-wrapper">
          <div class="top-controls-left">
            <button
              class="top-btn"
              data-action="top-action-1"
              aria-label="Acción primaria del proyecto"
            >
              Acción 1
            </button>
            <button
              class="top-btn"
              data-action="top-action-2"
              aria-label="Acción secundaria del proyecto"
            >
              Acción 2
            </button>
            <button
              class="top-chevron"
              data-action="show-more"
              aria-label="Más opciones"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </button>
          </div>
          <!-- Dropdown Menu -->
          <div class="top-controls-dropdown">
            <ul>
              <li>
                <a href="#" data-action="share" aria-label="Compartir proyecto"
                  ><svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <circle cx="18" cy="5" r="3"></circle>
                    <circle cx="6" cy="12" r="3"></circle>
                    <circle cx="18" cy="19" r="3"></circle>
                    <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                    <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                  </svg>
                  Compartir
                </a>
              </li>
              <li>
                <a
                  href="#"
                  data-action="favorite"
                  aria-label="Agregar a favoritos"
                  ><svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"
                    ></path>
                  </svg>
                  Agregar a favoritos
                </a>
              </li>
              <li>
                <a
                  href="#"
                  data-action="copy-link"
                  aria-label="Copiar enlace del proyecto"
                  ><svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <path
                      d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.93 1.93"
                    ></path>
                    <path
                      d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.93-1.93"
                    ></path>
                  </svg>
                  Copiar enlace
                </a>
              </li>
              <li>
                <a href="#" data-action="report" aria-label="Reportar contenido"
                  ><svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                  >
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="8" x2="12" y2="12"></line>
                    <line x1="12" y1="16" x2="12.01" y2="16"></line>
                  </svg>
                  Reportar contenido
                </a>
              </li>
            </ul>
          </div>
        </div>
        <button class="close-btn" id="close-btn" aria-label="Cerrar panel">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>

      <!-- Content Area (Middle) -->
      <div id="sheet-content"></div>

      <!-- Bottom Controls (Footer) -->
      <div class="sheet-bottom-controls">
        <button
          class="btn-secondary"
          data-action="secondary-action"
          aria-label="Ver opciones secundarias"
        >
          Secundario
        </button>
        <button
          class="btn-primary"
          data-action="primary-action"
          aria-label="Abrir proyecto completo"
        >
          Acción Principal
        </button>
        <button
          class="btn-more"
          data-action="more-options"
          aria-label="Más opciones"
        >
          ⋮
        </button>
      </div>
    </div>

    <!-- Initialize Sheet System -->
    <link rel="stylesheet" href="./shared/components/sheet/sheet.css" />
    <script src="./shared/components/sheet/sheet-templates.js"></script>
    <script src="./shared/components/sheet/sheet-content.js"></script>
    <script src="./shared/components/sheet/sheet-handlers.js"></script>
    <script src="./shared/components/sheet/sheet-system.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Configuración de acciones compartidas
        const moreActions = [
          { label: "Compartir", action: "share", iconName: "share" },
          { label: "Favoritos", action: "favorite", iconName: "favorite" },
          { label: "Copiar enlace", action: "copy-link", iconName: "copy" },
        ];

        // Función helper para cargar portfolio detail
        window.loadPortfolioDetail = function (portfolioId) {
          const portfolioItem = portfolioData.find(
            (item) => item.id === portfolioId,
          );

          if (!portfolioItem) {
            loadSheet({
              topControls: { actions: [], moreActions: { enabled: false } },
              content: { html: "<p>Proyecto no encontrado</p>" },
              bottomControls: { primary: null },
            });
            return;
          }

          // Generar tags HTML
          const disciplineLabels = {
            brands: "Brands",
            strategy: "Strategy",
            studio: "Studio",
            dev: "Development",
          };
          const tagsHtml = portfolioItem.category
            .map((cat) => `<span class="tag">${cat}</span>`)
            .join("");

          // Generar contenido del portfolio
          const contentHtml = `
          <div class="portfolio-detail">
            <img src="${portfolioItem.cover_image}" alt="${portfolioItem.title[0]}" class="portfolio-detail-cover">
            <div class="portfolio-detail-header">
              <img src="${portfolioItem.logo || portfolioItem.cover_image}" alt="${portfolioItem.title[0]} logo" class="portfolio-detail-logo">
              <div class="portfolio-detail-title">
                <h2>${portfolioItem.title[0]} <small>| ${portfolioItem.title[1]}</small></h2>
                <span class="portfolio-detail-client">${portfolioItem.client_name} • ${portfolioItem.client_industry}</span>
              </div>
            </div>
            <div class="portfolio-detail-meta">
              <span class="tag tag-discipline">${disciplineLabels[portfolioItem.discipline] || portfolioItem.discipline}</span>
              ${tagsHtml}
            </div>
            <p class="portfolio-detail-description">${portfolioItem.extract}</p>
          </div>
        `;

          // Configurar el sheet
          loadSheet({
            topControls: {
              actions: [],
              moreActions: {
                enabled: true,
                actions: [
                  { label: "Compartir", action: "share", iconName: "share" },
                  {
                    label: "Agregar a favoritos",
                    action: "favorite",
                    iconName: "favorite",
                  },
                  {
                    label: "Copiar enlace",
                    action: "copy-link",
                    iconName: "copy",
                  },
                  { label: "Reportar contenido", action: "report" },
                ],
              },
            },
            content: { html: contentHtml },
            bottomControls: {
              primary: {
                label: "Ver Proyecto Completo",
                action: "open-project",
              },
              moreActions: { enabled: false },
            },
          });
        };

        // Compatibilidad con botones antiguos (data-component)
        // DEBUG: Added event delegation to support dynamically created buttons after filtering
        document.addEventListener("click", (e) => {
          const trigger = e.target.closest("[data-component]");
          if (!trigger) return;

          console.log(
            "[DEBUG] Clicked on [data-component]:",
            trigger.getAttribute("data-component"),
            "id:",
            trigger.getAttribute("data-id"),
          );

          e.preventDefault();
          const componentName = trigger.getAttribute("data-component");

          if (componentName === "portfolioDetail") {
            const portfolioId = trigger.getAttribute("data-id");
            console.log(
              "[DEBUG] Portfolio detail requested for id:",
              portfolioId,
            );
            if (window.loadPortfolioDetail) {
              window.loadPortfolioDetail(portfolioId);
            }
          }
        });

        // DEBUG: Log to verify filter re-renders don't break button functionality
        const originalRenderCards = renderCards;
        window.renderCards = function (cards) {
          console.log(
            "[DEBUG] renderCards called with",
            cards?.length || 0,
            "cards",
          );
          originalRenderCards(cards);
          const seeMoreButtons = document.querySelectorAll(
            '.see-more[data-component="portfolioDetail"]',
          );
          console.log(
            "[DEBUG] After render, see-more buttons found:",
            seeMoreButtons.length,
          );
        };

        // Ejemplo de uso del sistema:
        // loadPortfolioDetail('casa-valentina');
        // O usar loadSheet({...}) directamente con cualquier configuración JSON
      });
    </script>
  </body>
</html>
