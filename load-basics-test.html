<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Realistic Test: Optimized Loading - Klef Agency</title>

    <style>
        :root {
            --wh: 20px;
        }

        body {
            margin: 0;
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background-color: #ffffff;
            color: #1d1d1f;
            line-height: 1.5;
        }

        /* Debug Overlay (Minimal) */
        .debug-status {
            position: fixed;
            bottom: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.8);
            color: #00ff00;
            padding: 5px 10px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 10px;
            z-index: 20000;
            pointer-events: none;
        }

        /* Content Sections for Scroll Testing */
        section {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            border-bottom: 1px solid #f0f0f0;
            padding: 40px;
            text-align: center;
        }

        .hero {
            background: #000;
            color: #fff;
        }

        .hero h1 {
            font-size: 4rem;
            margin: 0;
            letter-spacing: -0.05em;
        }

        .hero p {
            font-size: 1.5rem;
            opacity: 0.6;
            max-width: 800px;
        }

        .content-block {
            background: #fafafa;
        }

        .content-block h2 {
            font-size: 2.5rem;
            margin-bottom: 2rem;
        }

        .content-block p {
            max-width: 600px;
            color: #666;
        }

        /* Icon set placeholder */
        #icon-set {
            display: none;
        }

        /* Ensure navbar placeholder exists if needed by loader */
    </style>
</head>

<body>

    <div id="loader-debug" class="debug-status">Loader: Initializing...</div>

    <section class="hero">
        <h1>Optimized Loading</h1>
        <p>This page tests real user interactions: Hover Navigation, Scroll to reveal Island, and Click icons for
            Search/Sheets.</p>
    </section>

    <section class="content-block">
        <h2>Scroll down to see the Dynamic Island</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore
            magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
            commodo consequat.</p>
    </section>

    <section class="content-block" style="background: #fff;">
        <h2>Interactive Elements</h2>
        <p>Use the navigation bar (once loaded) to test Mega Menus (hover) and Search/Contact (click).</p>
    </section>

    <section class="content-block">
        <h2>Footer Area</h2>
        <p>This is the end of the test page. Scroll back up or check the Dynamic Island for navigation.</p>
    </section>

    <!-- Target for icons -->
    <div id="icon-set"></div>

    <script type="module">
        import { global_setup } from './shared/components/loader/global-setup.js';
        import BasicsLoader from './shared/components/loader/basics-loader.js';

        const debugLabel = document.getElementById('loader-debug');

        try {
            const loader = new BasicsLoader(global_setup);

            // Critical Load: Icons, Navigation, Sheets, Search, Cookies/Island
            await loader.loadAll();

            debugLabel.textContent = 'Loader: System Ready';
            setTimeout(() => debugLabel.style.opacity = '0.5', 3000);

            // Contact Sheet Configuration
            const contactBtn = document.querySelector('[data-action="open-contact-sheet"]');
            if (contactBtn && typeof sheetUtils !== 'undefined') {
                contactBtn.addEventListener('click', function () {
                    const contactHtml = `
                        <div class="contact-sheet-content">
                            <div class="contact-cta-section">
                                <h3>Listo para comenzar?</h3>
                                <div class="contact-options">
                                    <a href="tel:+526245161037" class="contact-option phone">
                                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                                        </svg>
                                        <span>Atencion al cliente</span>
                                    </a>
                                    <a href="https://wa.me/526241682048" class="contact-option phone">
                                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        </svg>
                                        <span>Soporte tecnico</span>
                                    </a>
                                    <a href="mailto:info@klef.agency" class="contact-option email">
                                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                                        </svg>
                                        <span>info@klef.agency</span>
                                    </a>
                                    <a href="https://wa.me/526245161037" class="contact-option whatsapp" target="_blank" rel="noopener">
                                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"></path>
                                        </svg>
                                        <span>WhatsApp</span>
                                    </a>
                                </div>
                            </div>
                            <div class="social-section">
                                <h4>Siguenos</h4>
                                <div class="social-links">
                                    <a href="https://www.instagram.com/klef.agency/" target="_blank" rel="noopener" aria-label="Instagram">
                                        <svg fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"></path>
                                        </svg>
                                    </a>
                                    <a href="https://www.facebook.com/klef.agency/" target="_blank" rel="noopener" aria-label="Facebook">
                                        <svg fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"></path>
                                        </svg>
                                    </a>
                                    <a href="https://www.youtube.com/channel/UCYFT6kwbsDzbiK6OjuKWM5w" target="_blank" rel="noopener" aria-label="YouTube">
                                        <svg fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M23.498 6.186a3.016 3.016 0 00-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 00.502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 002.122 2.136c1.872.505 9.377.505 9.377.505s7.505 0 9.377-.505a3.017 3.017 0 002.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path>
                                        </svg>
                                    </a>
                                </div>
                            </div>
                        </div>
                    `;

                    if (typeof loadSheet === 'function') {
                        loadSheet(sheetUtils.createHtmlConfig(contactHtml, {
                            primary: { label: 'Cerrar', action: 'close-sheet' }
                        }));
                    }
                });
            }

        } catch (error) {
            debugLabel.textContent = `Loader: ERROR - ${error.message}`;
            debugLabel.style.color = '#ff3b30';
            console.error('[BasicsLoader Test]', error);
        }
    </script>
</body>

</html>